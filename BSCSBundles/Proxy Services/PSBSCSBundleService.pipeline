<?xml version="1.0" encoding="UTF-8"?>
<con:pipelineEntry xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:oper="http://xmlns.oracle.com/servicebus/pipeline/operations">
    <con:coreEntry>
        <con:binding type="SOAP" isSoap12="false" xsi:type="con:SoapBindingType">
            <con:wsdl ref="BSCSBundles/Resources/WSDLs/BSCSBundleService"/>
            <con:binding>
                <con:name>BSCSBundlePortBinding</con:name>
                <con:namespace>http://bolsas.bscs.bundle.ws.ncl.nii.com</con:namespace>
            </con:binding>
        </con:binding>
        <oper:operations>
            <oper:monitoring enabled="false" aggregationInterval="1" level="action"/>
            <oper:tracingEnabled>false</oper:tracingEnabled>
            <oper:reporting>true</oper:reporting>
            <oper:logging enabled="true" level="debug"/>
            <oper:sla-alerting enabled="true" level="normal"/>
            <oper:pipeline-alerting enabled="true" level="normal"/>
        </oper:operations>
    </con:coreEntry>
    <con:router xmlns:ser="http://www.bea.com/wli/sb/services" xmlns:tran="http://www.bea.com/wli/sb/transports" xmlns:env="http://www.bea.com/wli/config/env" xmlns:http="http://www.bea.com/wli/sb/transports/http" xmlns:con1="http://www.bea.com/wli/sb/stages/config" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
        <con:pipeline type="request" name="PipelinePairNode_Removed_request" errorHandler="_onErrorHandler-5023787538777216641-4a17bb41.13cdedf2199.-7828">
            <con:stage name="stage_init_Removed" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                <con:context>
                    <con5:varNsDecl namespace="http://bolsas.bscs.bundle.ws.ncl.nii.com" prefix="bol" xmlns:con5="http://www.bea.com/wli/sb/stages/config"/>
                </con:context>
                <con:actions>
                    <con1:wsCallout>
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-6434</con5:id>
                        <con1:service xsi:type="ref:BusinessServiceRef" ref="3GBSCS/Business Services/BSJContractServiceUpdateService" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>execute</con1:operation>
                        <con1:request>
                            <con1:body>bodyBSJContractServiceUpdateRequest</con1:body>
                            <con1:header>headerBSJContractServiceUpdateRequest</con1:header>
                        </con1:request>
                        <con1:response>
                            <con1:body>bodyBSJContractServiceUpdateResponse</con1:body>
                            <con1:header>headerBSJContractServiceUpdateResponse</con1:header>
                        </con1:response>
                        <con1:requestTransform>
                            <con1:assign varName="in_cosPendingStatus">
                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-643a</con5:id>
                                <con1:expr>
                                    <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">"4"</con5:xqueryText>
                                </con1:expr>
                            </con1:assign>
                            <con1:assign varName="headerBSJContractServiceUpdateRequest">
                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-6439</con5:id>
                                <con1:expr>
                                    <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">$header</con5:xqueryText>
                                </con1:expr>
                            </con1:assign>
                            <con1:assign varName="rep1">
                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-6438</con5:id>
                                <con1:expr>
                                    <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">$in_contractId</con5:xqueryText>
                                </con1:expr>
                            </con1:assign>
                            <con1:assign varName="r3">
                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-6437</con5:id>
                                <con1:expr>
                                    <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">$in_profileId</con5:xqueryText>
                                </con1:expr>
                            </con1:assign>
                            <con1:assign varName="in_contractServicesWriteUpdate">
                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-6436</con5:id>
                                <con1:expr>
                                    <con5:xqueryTransform xmlns:con5="http://www.bea.com/wli/sb/stages/config">
                                        <con5:resource ref="BSCSBundles/Resources/XQuery/IN_XQ_PWriteBscsBundleService-Package_TO_BSJContractServiceUpdate-write"/>
                                        <con5:param name="in_param_cosPendingStatus">
                                            <con5:path>$in_cosPendingStatus</con5:path>
                                        </con5:param>
                                        <con5:param name="packages1">
                                            <con5:path>$body/bol:setWriteBSCSBundle/packages</con5:path>
                                        </con5:param>
                                        <con5:param name="in_param_profileId">
                                            <con5:path>$in_profileId</con5:path>
                                        </con5:param>
                                        <con5:param name="in_param_contractId">
                                            <con5:path>$contractId</con5:path>
                                        </con5:param>
                                    </con5:xqueryTransform>
                                </con1:expr>
                            </con1:assign>
                            <con1:assign varName="bodyBSJContractServiceUpdateRequest">
                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-6435</con5:id>
                                <con1:expr>
                                    <con5:xqueryTransform xmlns:con5="http://www.bea.com/wli/sb/stages/config">
                                        <con5:resource ref="BSCSBundles/Resources/XQuery/IN_XQ_PWriteBscsBundleService-Package_TO_BSJContractServiceUpdate"/>
                                        <con5:param name="contractServicesWrite1">
                                            <con5:path>$in_contractServicesWriteUpdate</con5:path>
                                        </con5:param>
                                    </con5:xqueryTransform>
                                </con1:expr>
                            </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                    </con1:wsCallout>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="error" name="_onErrorHandler-5893285784853191721--7b7c2843.13cdaba64d7.-7f11">
            <con:stage name="stage_Error1">
                <con:context>
                    <con1:userNsDecl namespace="http://www.bea.com/wli/sb/stages/transform/config" prefix="asd"/>
                </con:context>
                <con:actions>
                    <con2:ifThenElse>
                        <con1:id>_ActionId-5023787538777216641-4a17bb41.13cdedf2199.-7b91</con1:id>
                        <con2:case>
                            <con2:condition>
                                <con1:xqueryConditionExpr>
                                    <con1:compExpr operator="=">
                                        <con1:leftPath>xs:string(data($fault/ctx:errorCode))</con1:leftPath>
                                        <con1:rightPath>'1'</con1:rightPath>
                                    </con1:compExpr>
                                </con1:xqueryConditionExpr>
                            </con2:condition>
                            <con2:actions>
                                <con1:assign varName="bodyError" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                                    <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-5023787538777216641-4a17bb41.13cdedf2199.-7b90</con5:id>
                                    <con1:expr>
                                        <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config"><![CDATA[<bol:setWriteBSCSBundleResponse xmlns:bol="http://bolsas.bscs.bundle.ws.ncl.nii.com">
   <errorCode>{data($fault/ctx:errorCode)}</errorCode>
   <errorDescription>{data($fault/ctx:reason)}</errorDescription>
</bol:setWriteBSCSBundleResponse>]]></con5:xqueryText>
                                    </con1:expr>
                                </con1:assign>
                            </con2:actions>
                        </con2:case>
                        <con2:default>
                            <con1:assign varName="bodyError" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-5023787538777216641-4a17bb41.13cdedf2199.-7b8f</con5:id>
                                <con1:expr>
                                    <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config"><![CDATA[<bol:setWriteBSCSBundleResponse xmlns:bol="http://bolsas.bscs.bundle.ws.ncl.nii.com">
   <errorCode>{data($fault/ctx:errorCode)}</errorCode>
   <errorDescription>{fn:concat(data($fault/ctx:details/asd:ReceivedFaultDetail/asd:faultstring),data($fault/ctx:reason))}</errorDescription>
</bol:setWriteBSCSBundleResponse>]]></con5:xqueryText>
                                </con1:expr>
                            </con1:assign>
                        </con2:default>
                    </con2:ifThenElse>
                    <con1:assign varName="header" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-8687393328542752957-7ff5e535.13e8aecabf5.-7cbf</con5:id>
                        <con1:expr>
                            <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">&lt;soapenv:Header  	xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:bol="http://bolsas.bscs.bundle.ws.ncl.nii.com">
&lt;/soapenv:Header></con5:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:replace varName="body" contents-only="true" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-5893285784853191721--7b7c2843.13cdaba64d7.-7e96</con5:id>
                        <con1:location>
                            <con5:xpathText xmlns:con5="http://www.bea.com/wli/sb/stages/config">.</con5:xpathText>
                        </con1:location>
                        <con1:expr>
                            <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">$bodyError</con5:xqueryText>
                        </con1:expr>
                    </con1:replace>
                    <con1:reply>
                        <con1:id>_ActionId-5893285784853191721--7b7c2843.13cdaba64d7.-7e95</con1:id>
                    </con1:reply>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="error" name="_onErrorHandler-2671097973885696727-2ff6e5c2.13b9099a592.-7e2c">
            <con:stage name="stage_Error11">
                <con:context>
                    <con1:userNsDecl namespace="http://www.bea.com/wli/sb/stages/transform/config" prefix="asd"/>
                </con:context>
                <con:actions>
                    <con2:ifThenElse>
                        <con1:id>_ActionId-5023787538777216641-4a17bb41.13cdedf2199.-78dc</con1:id>
                        <con2:case>
                            <con2:condition>
                                <con1:xqueryConditionExpr>
                                    <con1:compExpr operator="=">
                                        <con1:leftPath>xs:string(data($fault/ctx:errorCode))</con1:leftPath>
                                        <con1:rightPath>'1'</con1:rightPath>
                                    </con1:compExpr>
                                </con1:xqueryConditionExpr>
                            </con2:condition>
                            <con2:actions>
                                <con1:assign varName="bodyError" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                                    <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-5023787538777216641-4a17bb41.13cdedf2199.-78db</con5:id>
                                    <con1:expr>
                                        <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config"><![CDATA[<bol:setWriteBSCSBundleResponse xmlns:bol="http://bolsas.bscs.bundle.ws.ncl.nii.com">
   <errorCode>{data($fault/ctx:errorCode)}</errorCode>
   <errorDescription>{data($fault/ctx:reason)}</errorDescription>
</bol:setWriteBSCSBundleResponse>]]></con5:xqueryText>
                                    </con1:expr>
                                </con1:assign>
                            </con2:actions>
                        </con2:case>
                        <con2:default>
                            <con1:assign varName="bodyError" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-5023787538777216641-4a17bb41.13cdedf2199.-78da</con5:id>
                                <con1:expr>
                                    <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config"><![CDATA[<bol:setWriteBSCSBundleResponse xmlns:bol="http://bolsas.bscs.bundle.ws.ncl.nii.com">
   <errorCode>{data($fault/ctx:errorCode)}</errorCode>
   <errorDescription>{fn:concat(data($fault/ctx:details/asd:ReceivedFaultDetail/asd:faultstring),data($fault/ctx:reason))}</errorDescription>
</bol:setWriteBSCSBundleResponse>]]></con5:xqueryText>
                                </con1:expr>
                            </con1:assign>
                        </con2:default>
                    </con2:ifThenElse>
                    <con1:assign varName="header" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-8687393328542752957-7ff5e535.13e8aecabf5.-7d87</con5:id>
                        <con1:expr>
                            <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">&lt;soapenv:Header  	xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:bol="http://bolsas.bscs.bundle.ws.ncl.nii.com">
&lt;/soapenv:Header></con5:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:replace varName="body" contents-only="true" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-5023787538777216641-4a17bb41.13cdedf2199.-78d8</con5:id>
                        <con1:location>
                            <con5:xpathText xmlns:con5="http://www.bea.com/wli/sb/stages/config">.</con5:xpathText>
                        </con1:location>
                        <con1:expr>
                            <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">$bodyError</con5:xqueryText>
                        </con1:expr>
                    </con1:replace>
                    <con1:reply>
                        <con1:id>_ActionId-5023787538777216641-4a17bb41.13cdedf2199.-78d7</con1:id>
                    </con1:reply>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="request" name="PipelinePairNode1_request" errorHandler="_onErrorHandler-4812617756576364731--47710f64.13cd909a0ff.-7f6a">
            <con:stage name="stage_entrada" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                <con:context/>
                <con:actions>
                    <con1:assign varName="fecha-entrada">
                        <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-65ad</con4:id>
                        <con1:expr>
                            <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">fn:current-dateTime()</con4:xqueryText>
                        </con1:expr>
                    </con1:assign>
                </con:actions>
            </con:stage>
            <con:stage name="stage_business" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                <con:context>
                    <con4:userNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/PROVI_BOLS/NII_BSCS_BUNDLES_PKG/GET_SEARCH_BSCS_BUNDLES_PRC/" prefix="bol1" xmlns:con4="http://www.bea.com/wli/sb/stages/config"/>
                    <con4:userNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/ConsultaClienteGestorDB" prefix="db" xmlns:con4="http://www.bea.com/wli/sb/stages/config"/>
                    <con4:userNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/ConsultaClienteGestorADDB" prefix="db2" xmlns:con4="http://www.bea.com/wli/sb/stages/config"/>
                    <con4:userNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/PROVI_BOLS/VALIDA_BUNDLES_PRC/" prefix="cc" xmlns:con4="http://www.bea.com/wli/sb/stages/config"/>
                    <con4:varNsDecl namespace="http://bolsas.bscs.bundle.ws.ncl.nii.com" prefix="bol" xmlns:con4="http://www.bea.com/wli/sb/stages/config"/>
                </con:context>
                <con:actions>
                    <con1:wsCallout>
                        <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-4763300888592724251--10394b6.15110e00958.-78f2</con4:id>
                        <con1:service xsi:type="ref:BusinessServiceRef" ref="BSCSBundles/Business Services/BSValidaClienteGestorDB" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>ValidaClienteGestorDB</con1:operation>
                        <con1:request>
                            <con1:body wrapped="false">requestConsultaDB</con1:body>
                            <con1:header/>
                        </con1:request>
                        <con1:response>
                            <con1:body wrapped="false">responseConsultaDB</con1:body>
                            <con1:header/>
                        </con1:response>
                        <con1:requestTransform>
                            <con1:assign varName="requestConsultaDB">
                                <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-2195867620790216904-7dcffff1.15116edbf74.-7fc4</con4:id>
                                <con1:expr>
                                    <con:xqueryTransform xmlns:con="http://www.bea.com/wli/sb/stages/config">
                                        <con:resource ref="BSCSBundles/Resources/XQuery/IN_XQ_ValidaClienteGestor"/>
                                        <con:param name="getSearchBSCSBundles1">
                                            <con:path>$body/bol:getSearchBSCSBundles</con:path>
                                        </con:param>
                                    </con:xqueryTransform>
                                </con1:expr>
                            </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform>
                            <con1:assign varName="RespuestaDB">
                                <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-4763300888592724251--10394b6.15110e00958.-782f</con4:id>
                                <con1:expr>
                                    <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">$responseConsultaDB</con:xqueryText>
                                </con1:expr>
                            </con1:assign>
                        </con1:responseTransform>
                    </con1:wsCallout>
                    <con1:ifThenElse>
                        <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-4763300888592724251--10394b6.15110e00958.-77f7</con4:id>
                        <con1:case>
                            <con1:condition>
                                <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">data($RespuestaDB/cc:SN_COD_RETORNO) = 0</con4:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:ifThenElse>
                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-4763300888592724251--10394b6.15110e00958.-77ed</con4:id>
                                    <con1:case>
                                        <con1:condition>
                                            <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">data($body/bol:getSearchBSCSBundles/bundleTypeFlag)= 0</con4:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:wsCallout>
                                                <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-4763300888592724251--10394b6.15110e00958.-77e9</con4:id>
                                                <con1:service xsi:type="ref:BusinessServiceRef" ref="BSCSBundles/Business Services/BSConsultaClienteGestorDB" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>ConsultaClienteGestorDB</con1:operation>
                                                <con1:request>
                                                    <con1:body wrapped="false">requestBodyBS</con1:body>
                                                    <con1:header/>
                                                </con1:request>
                                                <con1:response>
                                                    <con1:body wrapped="false">responseBodyBS</con1:body>
                                                    <con1:header/>
                                                </con1:response>
                                                <con1:requestTransform>
                                                    <con1:replace varName="requestBodyBS" contents-only="false">
                                                        <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-4763300888592724251--10394b6.15110e00958.-77ec</con4:id>
                                                        <con1:expr>
                                                            <con4:xqueryTransform xmlns:con4="http://www.bea.com/wli/sb/stages/config">
                                                                <con4:resource ref="BSCSBundles/Resources/XQuery/IN_XQ_ConsultaClienteGestor_TO_BSConsultaClienteGestor"/>
                                                                <con4:param name="getSearchBSCSBundles1">
                                                                    <con4:path>$body/bol:getSearchBSCSBundles</con4:path>
                                                                </con4:param>
                                                            </con4:xqueryTransform>
                                                        </con1:expr>
                                                    </con1:replace>
                                                </con1:requestTransform>
                                                <con1:responseTransform>
                                                    <con1:assign varName="RespuestaBS">
                                                        <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-4763300888592724251--10394b6.15110e00958.-77eb</con4:id>
                                                        <con1:expr>
                                                            <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">$responseBodyBS</con4:xqueryText>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con1:assign varName="largoLista">
                                                        <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-7793957062963415911-e2cabea.15115a171b9.-7f5e</con4:id>
                                                        <con1:expr>
                                                            <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">count($RespuestaBS/db:ConsultaClienteGestorDBOutput)</con4:xqueryText>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con1:ifThenElse>
                                                        <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-7793957062963415911-e2cabea.15115a171b9.-7f41</con4:id>
                                                        <con1:case>
                                                            <con1:condition>
                                                                <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">xs:int($largoLista) >0</con4:xqueryText>
                                                            </con1:condition>
                                                            <con1:actions>
                                                                <con1:replace varName="responseBodyBS" contents-only="false">
                                                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-7793957062963415911-e2cabea.15115a171b9.-7f3f</con4:id>
                                                                    <con1:expr>
                                                                        <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">$body/db:ConsultaClienteGestorDBOutputCollection</con4:xqueryText>
                                                                    </con1:expr>
                                                                </con1:replace>
                                                            </con1:actions>
                                                        </con1:case>
                                                        <con1:default>
                                                            <con1:Error>
                                                                <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-7793957062963415911-e2cabea.15115a171b9.-7f07</con4:id>
                                                                <con1:errCode>1</con1:errCode>
                                                                <con1:message>No se encuentra cliente configurado en catalogo producto</con1:message>
                                                            </con1:Error>
                                                        </con1:default>
                                                    </con1:ifThenElse>
                                                </con1:responseTransform>
                                            </con1:wsCallout>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:default>
                                        <con1:wsCallout>
                                            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-4763300888592724251--10394b6.15110e00958.-77e5</con4:id>
                                            <con1:service xsi:type="ref:BusinessServiceRef" ref="BSCSBundles/Business Services/BSConsultaClienteGestorADDB" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                            <con1:operation>ConsultaClienteGestorADDB</con1:operation>
                                            <con1:request>
                                                <con1:body wrapped="false">requestBodyBS</con1:body>
                                                <con1:header/>
                                            </con1:request>
                                            <con1:response>
                                                <con1:body wrapped="false">responseBodyBS</con1:body>
                                                <con1:header/>
                                            </con1:response>
                                            <con1:requestTransform>
                                                <con1:replace varName="requestBodyBS" contents-only="false">
                                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-4763300888592724251--10394b6.15110e00958.-77e8</con4:id>
                                                    <con1:expr>
                                                        <con4:xqueryTransform xmlns:con4="http://www.bea.com/wli/sb/stages/config">
                                                            <con4:resource ref="BSCSBundles/Resources/XQuery/IN_XQ_ConsultaClienteGestorAD_TO_BSConsultaClienteGestorAD"/>
                                                            <con4:param name="getSearchBSCSBundles1">
                                                                <con4:path>$body/bol:getSearchBSCSBundles</con4:path>
                                                            </con4:param>
                                                        </con4:xqueryTransform>
                                                    </con1:expr>
                                                </con1:replace>
                                            </con1:requestTransform>
                                            <con1:responseTransform>
                                                <con1:assign varName="RespuestaBS">
                                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-7793957062963415911-e2cabea.15115a171b9.-7d51</con4:id>
                                                    <con1:expr>
                                                        <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">$responseBodyBS</con4:xqueryText>
                                                    </con1:expr>
                                                </con1:assign>
                                                <con1:assign varName="largoLista">
                                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-7793957062963415911-e2cabea.15115a171b9.-7d53</con4:id>
                                                    <con1:expr>
                                                        <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">count($RespuestaBS/db2:ConsultaClienteGestorADDBOutput)</con4:xqueryText>
                                                    </con1:expr>
                                                </con1:assign>
                                                <con1:ifThenElse>
                                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-7793957062963415911-e2cabea.15115a171b9.-7e5e</con4:id>
                                                    <con1:case>
                                                        <con1:condition>
                                                            <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">xs:int($largoLista) > 0</con4:xqueryText>
                                                        </con1:condition>
                                                        <con1:actions>
                                                            <con1:replace varName="responseBodyBS" contents-only="false">
                                                                <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-7793957062963415911-e2cabea.15115a171b9.-7da7</con4:id>
                                                                <con1:expr>
                                                                    <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">$body/db2:ConsultaClienteGestorADDBOutputCollection</con4:xqueryText>
                                                                </con1:expr>
                                                            </con1:replace>
                                                        </con1:actions>
                                                    </con1:case>
                                                    <con1:default>
                                                        <con1:Error>
                                                            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-7793957062963415911-e2cabea.15115a171b9.-7e5c</con4:id>
                                                            <con1:errCode>1</con1:errCode>
                                                            <con1:message>No se encuentra cliente configurado en catalogo producto</con1:message>
                                                        </con1:Error>
                                                    </con1:default>
                                                </con1:ifThenElse>
                                            </con1:responseTransform>
                                        </con1:wsCallout>
                                    </con1:default>
                                </con1:ifThenElse>
                            </con1:actions>
                        </con1:case>
                        <con1:default>
                            <con4:assign varName="errorBody" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con1="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/transform/config">
                                <con1:id>_ActionId-7793957062963415911-e2cabea.15115a171b9.-7e1f</con1:id>
                                <con4:expr>
                                    <con1:xqueryText><![CDATA[<bol:getSearchBSCSBundlesResponse xmlns:bol="http://bolsas.bscs.bundle.ws.ncl.nii.com">
  <bol:errorCode>{data($RespuestaDB/cc:SN_COD_RETORNO)}</bol:errorCode>
  <bol:errorDescription>{data($RespuestaDB/cc:SV_MENS_RETORNO)}</bol:errorDescription>
</bol:getSearchBSCSBundlesResponse>]]></con1:xqueryText>
                                </con4:expr>
                            </con4:assign>
                            <con4:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con1="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/transform/config">
                                <con1:id>_ActionId-7793957062963415911-e2cabea.15115a171b9.-7e1e</con1:id>
                                <con4:location>
                                    <con4:xpathText xmlns:con4="http://www.bea.com/wli/sb/stages/config">.</con4:xpathText>
                                </con4:location>
                                <con4:expr>
                                    <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">$errorBody</con4:xqueryText>
                                </con4:expr>
                            </con4:replace>
                            <con1:reply xmlns:con4="http://www.bea.com/wli/sb/stages/config" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con1="http://www.bea.com/wli/sb/stages/config">
                                <con1:id>_ActionId-7793957062963415911-e2cabea.15115a171b9.-7e1d</con1:id>
                            </con1:reply>
                        </con1:default>
                    </con1:ifThenElse>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="error" name="_onErrorHandler-5893285784853191721--7b7c2843.13cdaba64d7.-7fff">
            <con:stage name="stage_Error11">
                <con:context>
                    <con1:userNsDecl namespace="http://www.bea.com/wli/sb/stages/transform/config" prefix="asd"/>
                </con:context>
                <con:actions>
                    <con2:ifThenElse>
                        <con1:id>_ActionId-5023787538777216641-4a17bb41.13cdedf2199.-7990</con1:id>
                        <con2:case>
                            <con2:condition>
                                <con1:xqueryConditionExpr>
                                    <con1:compExpr operator="=">
                                        <con1:leftPath>xs:string(data($fault/ctx:errorCode))</con1:leftPath>
                                        <con1:rightPath>'1'</con1:rightPath>
                                    </con1:compExpr>
                                </con1:xqueryConditionExpr>
                            </con2:condition>
                            <con2:actions>
                                <con1:assign varName="bodyError" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                                    <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-5023787538777216641-4a17bb41.13cdedf2199.-798f</con5:id>
                                    <con1:expr>
                                        <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config"><![CDATA[<bol:setWriteBSCSBundleResponse xmlns:bol="http://bolsas.bscs.bundle.ws.ncl.nii.com">
   <errorCode>{data($fault/ctx:errorCode)}</errorCode>
   <errorDescription>{data($fault/ctx:reason)}</errorDescription>
</bol:setWriteBSCSBundleResponse>]]></con5:xqueryText>
                                    </con1:expr>
                                </con1:assign>
                            </con2:actions>
                        </con2:case>
                        <con2:default>
                            <con1:assign varName="bodyError" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-5023787538777216641-4a17bb41.13cdedf2199.-798e</con5:id>
                                <con1:expr>
                                    <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config"><![CDATA[<bol:setWriteBSCSBundleResponse xmlns:bol="http://bolsas.bscs.bundle.ws.ncl.nii.com">
   <errorCode>{data($fault/ctx:errorCode)}</errorCode>
   <errorDescription>{fn:concat(data($fault/ctx:details/asd:ReceivedFaultDetail/asd:faultstring),data($fault/ctx:reason))}</errorDescription>
</bol:setWriteBSCSBundleResponse>]]></con5:xqueryText>
                                </con1:expr>
                            </con1:assign>
                        </con2:default>
                    </con2:ifThenElse>
                    <con1:assign varName="header" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-8687393328542752957-7ff5e535.13e8aecabf5.-7ba5</con5:id>
                        <con1:expr>
                            <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">&lt;soapenv:Header  	xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:bol="http://bolsas.bscs.bundle.ws.ncl.nii.com">
&lt;/soapenv:Header></con5:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:replace varName="body" contents-only="true" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-5023787538777216641-4a17bb41.13cdedf2199.-798c</con5:id>
                        <con1:location>
                            <con5:xpathText xmlns:con5="http://www.bea.com/wli/sb/stages/config">.</con5:xpathText>
                        </con1:location>
                        <con1:expr>
                            <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">$bodyError</con5:xqueryText>
                        </con1:expr>
                    </con1:replace>
                    <con1:reply>
                        <con1:id>_ActionId-5023787538777216641-4a17bb41.13cdedf2199.-798b</con1:id>
                    </con1:reply>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="request" name="PipelinePairNode_ContractAddService_request" errorHandler="_onErrorHandler-5893285784853191721--7b7c2843.13cdaba64d7.-7f12">
            <con:stage name="stage_GenericDirectoryNumberSearch">
                <con:context>
                    <con1:userNsDecl namespace="http://www.lhsgroup.com/ws_v2_NII_1" prefix="NII"/>
                </con:context>
                <con:actions>
                    <con2:wsCallout>
                        <con1:id>_ActionId-8013928541524392284-590c53dc.13da89988b4.-7f59</con1:id>
                        <con2:service xsi:type="ref:BusinessServiceRef" ref="3GBSCS/Business Services/BSGenericDirectoryNumberSearch" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con2:operation>execute</con2:operation>
                        <con2:request>
                            <con2:body>GDireNumSRequest</con2:body>
                            <con2:header>GDireNumSHeaderRequest</con2:header>
                        </con2:request>
                        <con2:response>
                            <con2:body>GDireNumSResponse</con2:body>
                            <con2:header>GDireNumSHeaderResponse</con2:header>
                        </con2:response>
                        <con2:requestTransform>
                            <con2:assign varName="LC_plcode">
                                <con1:id>_ActionId-8013928541524392284-590c53dc.13da89988b4.-7db5</con1:id>
                                <con2:expr>
                                    <con1:xqueryText>1000</con1:xqueryText>
                                </con2:expr>
                            </con2:assign>
                            <con2:assign varName="LC_submId">
                                <con1:id>_ActionId-8013928541524392284-590c53dc.13da89988b4.-7e09</con1:id>
                                <con2:expr>
                                    <con1:xqueryText>2</con1:xqueryText>
                                </con2:expr>
                            </con2:assign>
                            <con2:assign varName="LC_npcode">
                                <con1:id>_ActionId-8013928541524392284-590c53dc.13da89988b4.-7e41</con1:id>
                                <con2:expr>
                                    <con1:xqueryText>1</con1:xqueryText>
                                </con2:expr>
                            </con2:assign>
                            <con2:assign varName="GDireNumSRequest">
                                <con1:id>_ActionId-8013928541524392284-590c53dc.13da89988b4.-7e79</con1:id>
                                <con2:expr>
                                    <con1:xqueryText><![CDATA[<ws:GenericDirectoryNumberSearch xmlns:java="http://xml.apache.org/axis/wsdd/providers/java" xmlns:ws="http://www.lhsgroup.com/ws_v2_NII_1">
		<java:input>
            <ws:plcode>{$LC_plcode}</ws:plcode>
            <ws:submId>{$LC_submId}</ws:submId>
            <ws:npcode>{$LC_npcode}</ws:npcode>
        </java:input>
         <java:sessionChange>
            <ws:values>
               <ws:item>
                  <ws:key>BU_ID</ws:key>
                  <ws:value>2</ws:value>
               </ws:item>
            </ws:values>
         </java:sessionChange>
</ws:GenericDirectoryNumberSearch>]]></con1:xqueryText>
                                </con2:expr>
                            </con2:assign>
                            <con1:assign varName="GDireNumSHeaderRequest" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-8013928541524392284-590c53dc.13da89988b4.-7ecd</con5:id>
                                <con1:expr>
                                    <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">$header</con5:xqueryText>
                                </con1:expr>
                            </con1:assign>
                        </con2:requestTransform>
                        <con2:responseTransform>
                            <con2:assign varName="LC_dnId">
                                <con1:id>_ActionId-9070604942137522127--60f127fc.13dac6c1f03.-7d2a</con1:id>
                                <con2:expr>
                                    <con1:xqueryText>data($GDireNumSResponse/NII:directorynumbers/NII:item/NII:dnId)</con1:xqueryText>
                                </con2:expr>
                            </con2:assign>
                            <con2:assign varName="LC_dnI_s">
                                <con1:id>_ActionId-8013928541524392284-590c53dc.13da89988b4.-7d7d</con1:id>
                                <con2:expr>
                                    <con1:xqueryText>$GDireNumSResponse/NII:directorynumbers</con1:xqueryText>
                                </con2:expr>
                            </con2:assign>
                            <con2:ifThenElse>
                                <con1:id>_ActionId-9070604942137522127--60f127fc.13dac6c1f03.-7e2c</con1:id>
                                <con2:case>
                                    <con2:condition>
                                        <con1:xqueryConditionExpr>
                                            <con1:compExpr operator="!=">
                                                <con1:leftPath>$LC_dnId</con1:leftPath>
                                                <con1:rightPath>''</con1:rightPath>
                                            </con1:compExpr>
                                        </con1:xqueryConditionExpr>
                                    </con2:condition>
                                    <con2:actions/>
                                </con2:case>
                                <con2:default>
                                    <con2:Error>
                                        <con1:id>_ActionId-9070604942137522127--60f127fc.13dac6c1f03.-7df4</con1:id>
                                        <con2:errCode>1</con2:errCode>
                                        <con2:message>Error no es posibre crear contrato sin linea asociada.</con2:message>
                                    </con2:Error>
                                </con2:default>
                            </con2:ifThenElse>
                        </con2:responseTransform>
                    </con2:wsCallout>
                </con:actions>
            </con:stage>
            <con:stage name="stage_init_ContractAddService" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                <con:context>
                    <con5:varNsDecl namespace="http://bolsas.bscs.bundle.ws.ncl.nii.com" prefix="bol" xmlns:con5="http://www.bea.com/wli/sb/stages/config"/>
                    <con5:varNsDecl namespace="http://xml.apache.org/axis/wsdd/providers/java" prefix="java" xmlns:con5="http://www.bea.com/wli/sb/stages/config"/>
                    <con5:varNsDecl namespace="http://www.lhsgroup.com/ws_v2_NII_1" prefix="ws1" xmlns:con5="http://www.bea.com/wli/sb/stages/config"/>
                    <con3:variable name="BSJContractCreate" path="$BSJContractCreate">
                        <con3:service operation="execute">
                            <con3:reference ref="3GBSCS/Business Services/BSJcontractCreateService" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        </con3:service>
                    </con3:variable>
                </con:context>
                <con:actions>
                    <con1:wsCallout>
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-642c</con5:id>
                        <con1:service xsi:type="ref:BusinessServiceRef" ref="3GBSCS/Business Services/BSJcontractCreateService" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>execute</con1:operation>
                        <con1:request>
                            <con1:body>bodyBSJContractCreateServiceRequest</con1:body>
                            <con1:header>headerBSJContractCreateServiceRequest</con1:header>
                        </con1:request>
                        <con1:response>
                            <con1:body>bodyBSJContractCreateServiceResponse</con1:body>
                            <con1:header>headerBSJContractCreateServiceResponse</con1:header>
                        </con1:response>
                        <con1:requestTransform>
                            <con1:assign varName="in_services">
                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-9070604942137522127--60f127fc.13dac6c1f03.-7c7f</con5:id>
                                <con1:expr>
                                    <con5:xqueryTransform xmlns:con5="http://www.bea.com/wli/sb/stages/config">
                                        <con5:resource ref="BSCSBundles/Resources/XQuery/IN_XQ_PWriteBscsBundleService-Package_TO_BSJContractCreate-Service"/>
                                        <con5:param name="packages1">
                                            <con5:path>$body/bol:setWriteBSCSBundle/packages</con5:path>
                                        </con5:param>
                                    </con5:xqueryTransform>
                                </con1:expr>
                            </con1:assign>
                            <con1:assign varName="service_new">
                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-9070604942137522127--60f127fc.13dac6c1f03.-7c81</con5:id>
                                <con1:expr>
                                    <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">$in_services</con5:xqueryText>
                                </con1:expr>
                            </con1:assign>
                            <con1:insert varName="in_services">
                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-9070604942137522127--60f127fc.13dac6c1f03.-7cd4</con5:id>
                                <con1:location>
                                    <con5:xpathText xmlns:con5="http://www.bea.com/wli/sb/stages/config">/ws1:contractServicesAdd/ws1:services</con5:xpathText>
                                </con1:location>
                                <con1:where>first-child</con1:where>
                                <con1:expr>
                                    <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config"><![CDATA[<ws:item xmlns:ws="http://www.lhsgroup.com/ws_v2_NII_1">
	<ws:profileId>0</ws:profileId>
	<ws:sncode>{$snCore}</ws:sncode>
	<ws:spcode>{$spCore}</ws:spcode>
</ws:item>]]></con5:xqueryText>
                                </con1:expr>
                            </con1:insert>
                            <con1:assign varName="headerBSJContractCreateServiceRequest">
                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-6430</con5:id>
                                <con1:expr>
                                    <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">$header</con5:xqueryText>
                                </con1:expr>
                            </con1:assign>
                            <con1:assign varName="bodyBSJContractCreateServiceRequest">
                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-642f</con5:id>
                                <con1:expr>
                                    <con5:xqueryTransform xmlns:con5="http://www.bea.com/wli/sb/stages/config">
                                        <con5:resource ref="BSCSBundles/Resources/XQuery/IN_XQ_PWriteBscsBundleService_TO_BSJContractCreate"/>
                                        <con5:param name="dnId_Type">
                                            <con5:path>$LC_dnId</con5:path>
                                        </con5:param>
                                        <con5:param name="services1">
                                            <con5:path>$in_services/ws1:services</con5:path>
                                        </con5:param>
                                        <con5:param name="in_param_rpcode">
                                            <con5:path>$in_rpcode</con5:path>
                                        </con5:param>
                                        <con5:param name="enterpriseID1">
                                            <con5:path>data($body/bol:setWriteBSCSBundle/enterpriseID)</con5:path>
                                        </con5:param>
                                        <con5:param name="in_param_sccode">
                                            <con5:path>$in_sccode</con5:path>
                                        </con5:param>
                                        <con5:param name="in_param_plcode">
                                            <con5:path>$in_plcode</con5:path>
                                        </con5:param>
                                        <con5:param name="snCore_Type">
                                            <con5:path>$snCore</con5:path>
                                        </con5:param>
                                        <con5:param name="in_param_submId">
                                            <con5:path>$in_submId</con5:path>
                                        </con5:param>
                                    </con5:xqueryTransform>
                                </con1:expr>
                            </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform>
                            <con1:assign varName="contractIdResponse">
                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-642e</con5:id>
                                <con1:expr>
                                    <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">data($bodyBSJContractCreateServiceResponse/ws1:contractNew/ws1:coId)</con5:xqueryText>
                                </con1:expr>
                            </con1:assign>
                            <con1:replace varName="body" contents-only="true">
                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-642d</con5:id>
                                <con1:expr>
                                    <con5:xqueryTransform xmlns:con5="http://www.bea.com/wli/sb/stages/config">
                                        <con5:resource ref="BSCSBundles/Resources/XQuery/OUT_XQ_BSJContractNewService_toPWriteBscsBuldleService"/>
                                        <con5:param name="jcontractCreateReturn1">
                                            <con5:path>$bodyBSJContractCreateServiceResponse</con5:path>
                                        </con5:param>
                                    </con5:xqueryTransform>
                                </con1:expr>
                            </con1:replace>
                        </con1:responseTransform>
                    </con1:wsCallout>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="response" name="PipelinePairNode_Add_response" errorHandler="_onErrorHandler-5893285784853191721--7b7c2843.13cdaba64d7.-7fff">
            <con:stage name="stage_end_Add" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                <con:context/>
                <con:actions>
                    <con1:assign varName="header">
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-643c</con5:id>
                        <con1:expr>
                            <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">$headerBSJContractServiceAddResponse</con5:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:replace varName="body" contents-only="true">
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-643b</con5:id>
                        <con1:location>
                            <con5:xpathText xmlns:con5="http://www.bea.com/wli/sb/stages/config">.</con5:xpathText>
                        </con1:location>
                        <con1:expr>
                            <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config"><![CDATA[<bol:setWriteBSCSBundleResponse xmlns:bol="http://bolsas.bscs.bundle.ws.ncl.nii.com">
   <errorCode>0</errorCode>
   <errorDescription>OK</errorDescription>
</bol:setWriteBSCSBundleResponse>]]></con5:xqueryText>
                        </con1:expr>
                    </con1:replace>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="error" name="_onErrorHandler-5023787538777216641-4a17bb41.13cdedf2199.-77a9">
            <con:stage name="stage_Error111">
                <con:context>
                    <con1:userNsDecl namespace="http://www.bea.com/wli/sb/stages/transform/config" prefix="asd"/>
                </con:context>
                <con:actions>
                    <con2:ifThenElse>
                        <con1:id>_ActionId-5023787538777216641-4a17bb41.13cdedf2199.-7700</con1:id>
                        <con2:case>
                            <con2:condition>
                                <con1:xqueryConditionExpr>
                                    <con1:compExpr operator="=">
                                        <con1:leftPath>xs:string(data($fault/ctx:errorCode))</con1:leftPath>
                                        <con1:rightPath>'1'</con1:rightPath>
                                    </con1:compExpr>
                                </con1:xqueryConditionExpr>
                            </con2:condition>
                            <con2:actions>
                                <con1:assign varName="bodyError" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                                    <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-5023787538777216641-4a17bb41.13cdedf2199.-76ff</con5:id>
                                    <con1:expr>
                                        <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config"><![CDATA[<bol:setWriteBSCSBundleResponse xmlns:bol="http://bolsas.bscs.bundle.ws.ncl.nii.com">
   <errorCode>{data($fault/ctx:errorCode)}</errorCode>
   <errorDescription>{data($fault/ctx:reason)}</errorDescription>
</bol:setWriteBSCSBundleResponse>]]></con5:xqueryText>
                                    </con1:expr>
                                </con1:assign>
                            </con2:actions>
                        </con2:case>
                        <con2:default>
                            <con1:assign varName="bodyError" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-5023787538777216641-4a17bb41.13cdedf2199.-76fe</con5:id>
                                <con1:expr>
                                    <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config"><![CDATA[<bol:setWriteBSCSBundleResponse xmlns:bol="http://bolsas.bscs.bundle.ws.ncl.nii.com">
   <errorCode>{data($fault/ctx:errorCode)}</errorCode>
   <errorDescription>{fn:concat(data($fault/ctx:details/asd:ReceivedFaultDetail/asd:faultstring),data($fault/ctx:reason))}</errorDescription>
</bol:setWriteBSCSBundleResponse>]]></con5:xqueryText>
                                </con1:expr>
                            </con1:assign>
                        </con2:default>
                    </con2:ifThenElse>
                    <con1:assign varName="header" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-8687393328542752957-7ff5e535.13e8aecabf5.-7c15</con5:id>
                        <con1:expr>
                            <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">&lt;soapenv:Header  	xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:bol="http://bolsas.bscs.bundle.ws.ncl.nii.com">
&lt;/soapenv:Header></con5:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:replace varName="body" contents-only="true" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-5023787538777216641-4a17bb41.13cdedf2199.-76fc</con5:id>
                        <con1:location>
                            <con5:xpathText xmlns:con5="http://www.bea.com/wli/sb/stages/config">.</con5:xpathText>
                        </con1:location>
                        <con1:expr>
                            <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">$bodyError</con5:xqueryText>
                        </con1:expr>
                    </con1:replace>
                    <con1:reply>
                        <con1:id>_ActionId-5023787538777216641-4a17bb41.13cdedf2199.-76fb</con1:id>
                    </con1:reply>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="response" name="PipelinePairNode_ContractAddService_response" errorHandler="_onErrorHandler-5893285784853191721--7b7c2843.13cdaba64d7.-7f11">
            <con:stage name="stage_end_ContractAddService" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                <con:context>
                    <con5:varNsDecl namespace="http://bolsas.bscs.bundle.ws.ncl.nii.com" prefix="bol" xmlns:con5="http://www.bea.com/wli/sb/stages/config"/>
                </con:context>
                <con:actions>
                    <con1:assign varName="header">
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-642b</con5:id>
                        <con1:expr>
                            <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">$headerBSJContractCreateServiceResponse</con5:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:replace varName="bodyContractAddResponse" contents-only="true">
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-642a</con5:id>
                        <con1:location>
                            <con5:xpathText xmlns:con5="http://www.bea.com/wli/sb/stages/config">.</con5:xpathText>
                        </con1:location>
                        <con1:expr>
                            <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config"><![CDATA[<bol:setWriteBSCSBundleResponse xmlns:bol="http://bolsas.bscs.bundle.ws.ncl.nii.com">
   <errorCode>0</errorCode>
   <errorDescription>OK</errorDescription>
</bol:setWriteBSCSBundleResponse>]]></con5:xqueryText>
                        </con1:expr>
                    </con1:replace>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="response" name="PipelinePairNode1_response" errorHandler="_onErrorHandler-3519415211086069411--6be4aace.13b60a118b7.-65a4">
            <con:stage name="salida_business" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                <con:context>
                    <con4:userNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/OSB/ConsultaInfoLineaCliente/ConsultaClienteGestorDB" prefix="bol2" xmlns:con4="http://www.bea.com/wli/sb/stages/config"/>
                    <con4:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/PROVI_BOLS/NII_BSCS_BUNDLES_PKG/GET_SEARCH_BSCS_BUNDLES_PRC/" prefix="bol1" xmlns:con4="http://www.bea.com/wli/sb/stages/config"/>
                    <con3:variable name="bsc" path="$bsc">
                        <con3:service operation="SearchBSCSBundleService">
                            <con3:reference ref="BSCSBundles/Business Services/SearchBSCSBundleService_db" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        </con3:service>
                    </con3:variable>
                </con:context>
                <con:actions>
                    <con1:assign varName="fecha-salida">
                        <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-65a8</con4:id>
                        <con1:expr>
                            <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">fn:current-dateTime()</con4:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="salidabusiness">
                        <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-65a7</con4:id>
                        <con1:expr>
                            <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">$RespuestaBS</con4:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="asdasd">
                        <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-65a6</con4:id>
                        <con1:expr>
                            <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">$RespuestaBS/bol2:ConsultaClienteGestorDBOutputCollection</con4:xqueryText>
                        </con1:expr>
                    </con1:assign>
                </con:actions>
            </con:stage>
            <con:stage name="salida_proxy" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                <con:context>
                    <con4:userNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/PROVI_BOLS/VALIDA_BUNDLES_PRC/" prefix="cc" xmlns:con4="http://www.bea.com/wli/sb/stages/config"/>
                    <con4:varNsDecl namespace="http://bolsas.bscs.bundle.ws.ncl.nii.com" prefix="bol" xmlns:con4="http://www.bea.com/wli/sb/stages/config"/>
                </con:context>
                <con:actions>
                    <con1:ifThenElse>
                        <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-7793957062963415911-e2cabea.15115a171b9.-7dfe</con4:id>
                        <con1:case>
                            <con1:condition>
                                <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">data($body/bol:getSearchBSCSBundles/bundleTypeFlag)= 0</con4:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:replace varName="body" contents-only="true">
                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-7793957062963415911-e2cabea.15115a171b9.-7dfd</con4:id>
                                    <con1:expr>
                                        <con4:xqueryTransform xmlns:con4="http://www.bea.com/wli/sb/stages/config">
                                            <con4:resource ref="BSCSBundles/Resources/XQuery/OUT_XQ_BSConsultaClienteGestor_TO_ConsultaClienteGestor"/>
                                            <con4:param name="consultaClienteGestorDBOutputCollection1">
                                                <con4:path>$salidabusiness</con4:path>
                                            </con4:param>
                                        </con4:xqueryTransform>
                                    </con1:expr>
                                </con1:replace>
                            </con1:actions>
                        </con1:case>
                        <con1:default>
                            <con1:replace varName="body" contents-only="true">
                                <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-7793957062963415911-e2cabea.15115a171b9.-7dfc</con4:id>
                                <con1:expr>
                                    <con4:xqueryTransform xmlns:con4="http://www.bea.com/wli/sb/stages/config">
                                        <con4:resource ref="BSCSBundles/Resources/XQuery/OUT_XQ_BSConsultaClienteGestorAD_TO_ConsultaClienteGestorAD"/>
                                        <con4:param name="consultaClienteGestorADDBOutputCollection1">
                                            <con4:path>$salidabusiness</con4:path>
                                        </con4:param>
                                    </con4:xqueryTransform>
                                </con1:expr>
                            </con1:replace>
                        </con1:default>
                    </con1:ifThenElse>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="error" name="_onErrorHandler-5893285784853191721--7b7c2843.13cdaba64d7.-8000">
            <con:stage name="stage_Error11">
                <con:context>
                    <con1:userNsDecl namespace="http://www.bea.com/wli/sb/stages/transform/config" prefix="asd"/>
                </con:context>
                <con:actions>
                    <con2:ifThenElse>
                        <con1:id>_ActionId-5023787538777216641-4a17bb41.13cdedf2199.-79d2</con1:id>
                        <con2:case>
                            <con2:condition>
                                <con1:xqueryConditionExpr>
                                    <con1:compExpr operator="=">
                                        <con1:leftPath>xs:string(data($fault/ctx:errorCode))</con1:leftPath>
                                        <con1:rightPath>'1'</con1:rightPath>
                                    </con1:compExpr>
                                </con1:xqueryConditionExpr>
                            </con2:condition>
                            <con2:actions>
                                <con1:assign varName="bodyError" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                                    <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-5023787538777216641-4a17bb41.13cdedf2199.-79d1</con5:id>
                                    <con1:expr>
                                        <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config"><![CDATA[<bol:setWriteBSCSBundleResponse xmlns:bol="http://bolsas.bscs.bundle.ws.ncl.nii.com">
   <errorCode>{data($fault/ctx:errorCode)}</errorCode>
   <errorDescription>{data($fault/ctx:reason)}</errorDescription>
</bol:setWriteBSCSBundleResponse>]]></con5:xqueryText>
                                    </con1:expr>
                                </con1:assign>
                            </con2:actions>
                        </con2:case>
                        <con2:default>
                            <con1:assign varName="bodyError" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-5023787538777216641-4a17bb41.13cdedf2199.-79d0</con5:id>
                                <con1:expr>
                                    <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config"><![CDATA[<bol:setWriteBSCSBundleResponse xmlns:bol="http://bolsas.bscs.bundle.ws.ncl.nii.com">
   <errorCode>{data($fault/ctx:errorCode)}</errorCode>
   <errorDescription>{fn:concat(data($fault/ctx:details/asd:ReceivedFaultDetail/asd:faultstring),data($fault/ctx:reason))}</errorDescription>
</bol:setWriteBSCSBundleResponse>]]></con5:xqueryText>
                                </con1:expr>
                            </con1:assign>
                        </con2:default>
                    </con2:ifThenElse>
                    <con1:assign varName="header" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-8687393328542752957-7ff5e535.13e8aecabf5.-7b6d</con5:id>
                        <con1:expr>
                            <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">&lt;soapenv:Header  	xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:bol="http://bolsas.bscs.bundle.ws.ncl.nii.com">
&lt;/soapenv:Header></con5:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:replace varName="body" contents-only="true" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-5023787538777216641-4a17bb41.13cdedf2199.-79ce</con5:id>
                        <con1:location>
                            <con5:xpathText xmlns:con5="http://www.bea.com/wli/sb/stages/config">.</con5:xpathText>
                        </con1:location>
                        <con1:expr>
                            <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">$bodyError</con5:xqueryText>
                        </con1:expr>
                    </con1:replace>
                    <con1:reply>
                        <con1:id>_ActionId-5023787538777216641-4a17bb41.13cdedf2199.-79cd</con1:id>
                    </con1:reply>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="response" name="PipelinePairNode_header_response" errorHandler="_onErrorHandler-2671097973885696727-2ff6e5c2.13b9099a592.-7e2c">
            <con:stage name="stage_salida" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                <con:context/>
                <con:actions>
                    <con1:assign varName="header">
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-8687393328542752957-7ff5e535.13e8aecabf5.-7d33</con5:id>
                        <con1:expr>
                            <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">&lt;soapenv:Header  	xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:bol="http://bolsas.bscs.bundle.ws.ncl.nii.com">
&lt;/soapenv:Header></con5:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:replace varName="body" contents-only="true">
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-5f7b</con5:id>
                        <con1:expr>
                            <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config"><![CDATA[<bol:setWriteBSCSBundleResponse xmlns:bol="http://bolsas.bscs.bundle.ws.ncl.nii.com">
   <errorCode>0</errorCode>
   <errorDescription>OK</errorDescription>
</bol:setWriteBSCSBundleResponse>]]></con5:xqueryText>
                        </con1:expr>
                    </con1:replace>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="error" name="_onErrorHandler-5023787538777216641-4a17bb41.13cdedf2199.-7828">
            <con:stage name="stage_Error111">
                <con:context>
                    <con1:userNsDecl namespace="http://www.bea.com/wli/sb/stages/transform/config" prefix="asd"/>
                </con:context>
                <con:actions>
                    <con2:ifThenElse>
                        <con1:id>_ActionId-5023787538777216641-4a17bb41.13cdedf2199.-77af</con1:id>
                        <con2:case>
                            <con2:condition>
                                <con1:xqueryConditionExpr>
                                    <con1:compExpr operator="=">
                                        <con1:leftPath>xs:string(data($fault/ctx:errorCode))</con1:leftPath>
                                        <con1:rightPath>'1'</con1:rightPath>
                                    </con1:compExpr>
                                </con1:xqueryConditionExpr>
                            </con2:condition>
                            <con2:actions>
                                <con1:assign varName="bodyError" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                                    <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-5023787538777216641-4a17bb41.13cdedf2199.-77ae</con5:id>
                                    <con1:expr>
                                        <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config"><![CDATA[<bol:setWriteBSCSBundleResponse xmlns:bol="http://bolsas.bscs.bundle.ws.ncl.nii.com">
   <errorCode>{data($fault/ctx:errorCode)}</errorCode>
   <errorDescription>{data($fault/ctx:reason)}</errorDescription>
</bol:setWriteBSCSBundleResponse>]]></con5:xqueryText>
                                    </con1:expr>
                                </con1:assign>
                            </con2:actions>
                        </con2:case>
                        <con2:default>
                            <con1:assign varName="bodyError" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-5023787538777216641-4a17bb41.13cdedf2199.-77ad</con5:id>
                                <con1:expr>
                                    <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config"><![CDATA[<bol:setWriteBSCSBundleResponse xmlns:bol="http://bolsas.bscs.bundle.ws.ncl.nii.com">
   <errorCode>{data($fault/ctx:errorCode)}</errorCode>
   <errorDescription>{fn:concat(data($fault/ctx:details/asd:ReceivedFaultDetail/asd:faultstring),data($fault/ctx:reason))}</errorDescription>
</bol:setWriteBSCSBundleResponse>]]></con5:xqueryText>
                                </con1:expr>
                            </con1:assign>
                        </con2:default>
                    </con2:ifThenElse>
                    <con1:assign varName="header" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-8687393328542752957-7ff5e535.13e8aecabf5.-7bdd</con5:id>
                        <con1:expr>
                            <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">&lt;soapenv:Header  	xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:bol="http://bolsas.bscs.bundle.ws.ncl.nii.com">
&lt;/soapenv:Header></con5:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:replace varName="body" contents-only="true" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-5023787538777216641-4a17bb41.13cdedf2199.-77ab</con5:id>
                        <con1:location>
                            <con5:xpathText xmlns:con5="http://www.bea.com/wli/sb/stages/config">.</con5:xpathText>
                        </con1:location>
                        <con1:expr>
                            <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">$bodyError</con5:xqueryText>
                        </con1:expr>
                    </con1:replace>
                    <con1:reply>
                        <con1:id>_ActionId-5023787538777216641-4a17bb41.13cdedf2199.-77aa</con1:id>
                    </con1:reply>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="error" name="_onErrorHandler-4812617756576364731--47710f64.13cd909a0ff.-7f6a">
            <con:stage name="stage_error_search1">
                <con:context xmlns:con3="http://www.bea.com/wli/sb/typesystem/config"/>
                <con:actions xmlns:con3="http://www.bea.com/wli/sb/typesystem/config">
                    <con2:assign varName="errorBody">
                        <con1:id>_ActionId-4812617756576364731--47710f64.13cd909a0ff.-7ef7</con1:id>
                        <con2:expr>
                            <con1:xqueryText><![CDATA[<bol:getSearchBSCSBundlesResponse xmlns:bol="http://bolsas.bscs.bundle.ws.ncl.nii.com">
  <bol:errorCode>{data($fault/ctx:errorCode)}</bol:errorCode>
  <bol:errorDescription>{data($fault/ctx:reason)}</bol:errorDescription>
</bol:getSearchBSCSBundlesResponse>]]></con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                    <con2:replace varName="body" contents-only="true">
                        <con1:id>_ActionId-4812617756576364731--47710f64.13cd909a0ff.-7ef6</con1:id>
                        <con2:location>
                            <con4:xpathText xmlns:con4="http://www.bea.com/wli/sb/stages/config">.</con4:xpathText>
                        </con2:location>
                        <con2:expr>
                            <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">$errorBody</con4:xqueryText>
                        </con2:expr>
                    </con2:replace>
                    <con4:reply xmlns:con4="http://www.bea.com/wli/sb/stages/config">
                        <con4:id>_ActionId-4812617756576364731--47710f64.13cd909a0ff.-7ef5</con4:id>
                    </con4:reply>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="error" name="_onErrorHandler-4812617756576364731--47710f64.13cd909a0ff.-7fe3">
            <con:stage name="stage_Error11">
                <con:context>
                    <con1:userNsDecl namespace="http://www.bea.com/wli/sb/stages/transform/config" prefix="asd"/>
                </con:context>
                <con:actions>
                    <con2:ifThenElse>
                        <con1:id>_ActionId-5023787538777216641-4a17bb41.13cdedf2199.-7864</con1:id>
                        <con2:case>
                            <con2:condition>
                                <con1:xqueryConditionExpr>
                                    <con1:compExpr operator="=">
                                        <con1:leftPath>xs:string(data($fault/ctx:errorCode))</con1:leftPath>
                                        <con1:rightPath>'1'</con1:rightPath>
                                    </con1:compExpr>
                                </con1:xqueryConditionExpr>
                            </con2:condition>
                            <con2:actions>
                                <con1:assign varName="bodyError" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                                    <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-5023787538777216641-4a17bb41.13cdedf2199.-7863</con5:id>
                                    <con1:expr>
                                        <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config"><![CDATA[<bol:setWriteBSCSBundleResponse xmlns:bol="http://bolsas.bscs.bundle.ws.ncl.nii.com">
   <errorCode>{data($fault/ctx:errorCode)}</errorCode>
   <errorDescription>{data($fault/ctx:reason)}</errorDescription>
</bol:setWriteBSCSBundleResponse>]]></con5:xqueryText>
                                    </con1:expr>
                                </con1:assign>
                            </con2:actions>
                        </con2:case>
                        <con2:default>
                            <con1:assign varName="bodyError" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-5023787538777216641-4a17bb41.13cdedf2199.-7862</con5:id>
                                <con1:expr>
                                    <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config"><![CDATA[<bol:setWriteBSCSBundleResponse xmlns:bol="http://bolsas.bscs.bundle.ws.ncl.nii.com">
   <errorCode>{data($fault/ctx:errorCode)}</errorCode>
   <errorDescription>{fn:concat(data($fault/ctx:details/asd:ReceivedFaultDetail/asd:faultstring),data($fault/ctx:reason))}</errorDescription>
</bol:setWriteBSCSBundleResponse>]]></con5:xqueryText>
                                </con1:expr>
                            </con1:assign>
                        </con2:default>
                    </con2:ifThenElse>
                    <con1:assign varName="header" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-8687393328542752957-7ff5e535.13e8aecabf5.-7cf9</con5:id>
                        <con1:expr>
                            <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">&lt;soapenv:Header  	xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:bol="http://bolsas.bscs.bundle.ws.ncl.nii.com">
&lt;/soapenv:Header></con5:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:replace varName="body" contents-only="true" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-5023787538777216641-4a17bb41.13cdedf2199.-7860</con5:id>
                        <con1:location>
                            <con5:xpathText xmlns:con5="http://www.bea.com/wli/sb/stages/config">.</con5:xpathText>
                        </con1:location>
                        <con1:expr>
                            <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">$bodyError</con5:xqueryText>
                        </con1:expr>
                    </con1:replace>
                    <con1:reply>
                        <con1:id>_ActionId-5023787538777216641-4a17bb41.13cdedf2199.-785f</con1:id>
                    </con1:reply>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="request" name="PipelinePairNode_header_request" errorHandler="_onErrorHandler-4812617756576364731--47710f64.13cd909a0ff.-7fe3">
            <con:stage name="stage_config_CORE">
                <con:context>
                    <con1:userNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/ConfigServiceCoreDBA" prefix="con"/>
                    <con1:varNsDecl namespace="http://bolsas.bscs.bundle.ws.ncl.nii.com" prefix="bol"/>
                </con:context>
                <con:actions>
                    <con2:wsCallout>
                        <con1:id>_ActionId-204936508198360993-c3c95a6.13dd5498377.-7ec6</con1:id>
                        <con2:service xsi:type="ref:BusinessServiceRef" ref="BSCSBundles/Business Services/BSConfigServiceCore" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con2:operation>ConfigServiceCoreDBA</con2:operation>
                        <con2:request>
                            <con2:body>ConfServCoreRequest</con2:body>
                        </con2:request>
                        <con2:response>
                            <con2:body>ConfServCoreResponse</con2:body>
                        </con2:response>
                        <con2:requestTransform>
                            <con2:assign varName="ConfServCoreRequest">
                                <con1:id>_ActionId-204936508198360993-c3c95a6.13dd5498377.-7e8e</con1:id>
                                <con2:expr>
                                    <con1:xqueryText>&lt;con:ConfigServiceCoreDBAInput xmlns:con="http://xmlns.oracle.com/pcbpel/adapter/db/ConfigServiceCoreDBA">
    &lt;con:InAplicacion>{data($body/bol:setWriteBSCSBundle/client_Name)}&lt;/con:InAplicacion>
&lt;/con:ConfigServiceCoreDBAInput></con1:xqueryText>
                                </con2:expr>
                            </con2:assign>
                        </con2:requestTransform>
                        <con2:responseTransform>
                            <con2:assign varName="SNCORE_1">
                                <con1:id>_ActionId-204936508198360993-c3c95a6.13dd5498377.-7de8</con1:id>
                                <con2:expr>
                                    <con1:xqueryText>data($ConfServCoreResponse/con:ConfigServiceCoreDBAOutput/con:SNCODE)</con1:xqueryText>
                                </con2:expr>
                            </con2:assign>
                            <con2:assign varName="SPCORE_1">
                                <con1:id>_ActionId-204936508198360993-c3c95a6.13dd5498377.-7e20</con1:id>
                                <con2:expr>
                                    <con1:xqueryText>data($ConfServCoreResponse/con:ConfigServiceCoreDBAOutput/con:SPCODE)</con1:xqueryText>
                                </con2:expr>
                            </con2:assign>
                        </con2:responseTransform>
                    </con2:wsCallout>
                    <con2:assign varName="snCore">
                        <con1:id>_ActionId-204936508198360993-c3c95a6.13dd5498377.-7efe</con1:id>
                        <con2:expr>
                            <con1:xqueryText>$SNCORE_1</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                    <con2:assign varName="spCore">
                        <con1:id>_ActionId-204936508198360993-c3c95a6.13dd5498377.-7f5d</con1:id>
                        <con2:expr>
                            <con1:xqueryText>$SPCORE_1</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                </con:actions>
            </con:stage>
            <con:stage name="stage_header" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                <con:context>
                    <con5:varNsDecl namespace="http://bolsas.bscs.bundle.ws.ncl.nii.com" prefix="bol" xmlns:con5="http://www.bea.com/wli/sb/stages/config"/>
                </con:context>
                <con:actions>
                    <con1:replace varName="header" contents-only="false">
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-5f94</con5:id>
                        <con1:location>
                            <con5:xpathText xmlns:con5="http://www.bea.com/wli/sb/stages/config">.</con5:xpathText>
                        </con1:location>
                        <con1:expr>
                            <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config"><![CDATA[<soap-env:Header>
      <wsse:Security soap-env:actor="http://schemas.xmlsoap.org/soap/actor/next" soap-env:mustUnderstand="0" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
            <wsse:Username>BOLSAPP</wsse:Username>
            <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">SY</wsse:Password>
         </wsse:UsernameToken>
      </wsse:Security>
</soap-env:Header>]]></con:xqueryText>
                        </con1:expr>
                    </con1:replace>
                    <con1:assign varName="operationFlag">
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-5f93</con5:id>
                        <con1:expr>
                            <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">data($body/bol:setWriteBSCSBundle/operationFlag)</con5:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="in_cusId">
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-5f92</con5:id>
                        <con1:expr>
                            <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">data($body/bol:setWriteBSCSBundle/enterpriseID)</con5:xqueryText>
                        </con1:expr>
                    </con1:assign>
                </con:actions>
            </con:stage>
            <con:stage name="ValidacionFlujo3">
                <con:context>
                    <con1:userNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/PROVI_BOLS/NII_BSCS_BUNDLES_PKG/SET_CAMBIO_BOLSAS_GESTOR_PRC/" prefix="asd"/>
                    <con1:varNsDecl namespace="http://bolsas.bscs.bundle.ws.ncl.nii.com" prefix="bol"/>
                </con:context>
                <con:actions>
                    <con2:ifThenElse>
                        <con1:id>_ActionId-3614129741543138223-d7a496b.13d413cd7a6.-7f87</con1:id>
                        <con2:case>
                            <con2:condition>
                                <con1:xqueryConditionExpr>
                                    <con1:compExpr operator="=">
                                        <con1:leftPath>$operationFlag</con1:leftPath>
                                        <con1:rightPath>'1'</con1:rightPath>
                                    </con1:compExpr>
                                </con1:xqueryConditionExpr>
                            </con2:condition>
                            <con2:actions>
                                <con1:wsCallout xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                                    <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3535016641763401399-2e7fe2ec.13d5ef3f15c.-7f10</con5:id>
                                    <con1:service xsi:type="ref:BusinessServiceRef" ref="BSCSBundles/Business Services/BSIsCustomerLevel10Service" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>IsCustomerLevel10Service</con1:operation>
                                    <con1:request>
                                        <con1:body>BSisValidCusRequest</con1:body>
                                    </con1:request>
                                    <con1:response>
                                        <con1:body>BSisValidCusResponse</con1:body>
                                    </con1:response>
                                    <con1:requestTransform>
                                        <con1:assign varName="BSisValidCusRequest">
                                            <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3535016641763401399-2e7fe2ec.13d5ef3f15c.-7f14</con5:id>
                                            <con1:expr>
                                                <con5:xqueryTransform xmlns:con5="http://www.bea.com/wli/sb/stages/config">
                                                    <con5:resource ref="BSCSBundles/Resources/XQuery/IN_XQ_PWriteBscsBundleService_TO_BSIsValidCustomer"/>
                                                    <con5:param name="setWriteBSCSBundle1">
                                                        <con5:path>$body/bol:setWriteBSCSBundle</con5:path>
                                                    </con5:param>
                                                </con5:xqueryTransform>
                                            </con1:expr>
                                        </con1:assign>
                                    </con1:requestTransform>
                                    <con1:responseTransform>
                                        <con1:assign varName="isValidCustomer">
                                            <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3535016641763401399-2e7fe2ec.13d5ef3f15c.-7f13</con5:id>
                                            <con1:expr>
                                                <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">data($BSisValidCusResponse)</con5:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                        <con1:ifThenElse>
                                            <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3535016641763401399-2e7fe2ec.13d5ef3f15c.-7f12</con5:id>
                                            <con1:case>
                                                <con1:condition>
                                                    <con5:xqueryConditionExpr xmlns:con5="http://www.bea.com/wli/sb/stages/config">
                                                        <con5:compExpr operator="!=">
                                                            <con5:leftPath>$isValidCustomer</con5:leftPath>
                                                            <con5:rightPath>'FALSE'</con5:rightPath>
                                                        </con5:compExpr>
                                                    </con5:xqueryConditionExpr>
                                                </con1:condition>
                                                <con1:actions/>
                                            </con1:case>
                                            <con1:default>
                                                <con1:Error>
                                                    <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3535016641763401399-2e7fe2ec.13d5ef3f15c.-7f11</con5:id>
                                                    <con1:errCode>1</con1:errCode>
                                                    <con1:message>No cumple con la condicion de un Cliente Nivel 10</con1:message>
                                                </con1:Error>
                                            </con1:default>
                                        </con1:ifThenElse>
                                    </con1:responseTransform>
                                </con1:wsCallout>
                                <con2:wsCallout>
                                    <con1:id>_ActionId-3614129741543138223-d7a496b.13d413cd7a6.-7f19</con1:id>
                                    <con2:service xsi:type="ref:BusinessServiceRef" ref="BSCSBundles/Business Services/BSCambioBolsaGestDBA" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con2:operation>CambioBolsaGestDBA</con2:operation>
                                    <con2:request>
                                        <con2:body>CBolsaGRequest</con2:body>
                                    </con2:request>
                                    <con2:response>
                                        <con2:body>CBolsaGResponse</con2:body>
                                    </con2:response>
                                    <con2:requestTransform>
                                        <con2:assign varName="sncode_old">
                                            <con1:id>_ActionId-779364692801007969-40b34d4.13d44f1c153.-7dc1</con1:id>
                                            <con2:expr>
                                                <con1:xqueryText>0</con1:xqueryText>
                                            </con2:expr>
                                        </con2:assign>
                                        <con2:assign varName="status">
                                            <con1:id>_ActionId-779364692801007969-40b34d4.13d44f1c153.-7df9</con1:id>
                                            <con2:expr>
                                                <con1:xqueryText>'WAIT_PROCESS'</con1:xqueryText>
                                            </con2:expr>
                                        </con2:assign>
                                        <con2:replace varName="CBolsaGRequest" contents-only="false">
                                            <con1:id>_ActionId-779364692801007969-40b34d4.13d44f1c153.-7d87</con1:id>
                                            <con2:expr>
                                                <con1:xqueryTransform>
                                                    <con1:resource ref="BSCSBundles/Resources/XQuery/IN_XQ_CambioBolsaGestor"/>
                                                    <con1:param name="setWriteBSCSBundle1">
                                                        <con1:path>$body/bol:setWriteBSCSBundle</con1:path>
                                                    </con1:param>
                                                    <con1:param name="status">
                                                        <con1:path>$status</con1:path>
                                                    </con1:param>
                                                </con1:xqueryTransform>
                                            </con2:expr>
                                        </con2:replace>
                                    </con2:requestTransform>
                                    <con2:responseTransform>
                                        <con1:assign varName="header" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3614129741543138223-d7a496b.13d413cd7a6.-7d5a</con5:id>
                                            <con1:expr>
                                                <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">&lt;soapenv:Header  	xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:bol="http://bolsas.bscs.bundle.ws.ncl.nii.com">
&lt;/soapenv:Header></con5:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                        <con1:replace varName="body" contents-only="true" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3614129741543138223-d7a496b.13d413cd7a6.-7d59</con5:id>
                                            <con1:expr>
                                                <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config"><![CDATA[<bol:setWriteBSCSBundleResponse xmlns:bol="http://bolsas.bscs.bundle.ws.ncl.nii.com">
   <errorCode>{data($CBolsaGResponse/asd:SN_COD_RETORNO)}</errorCode>
   <errorDescription>{data($CBolsaGResponse/asd:SV_MENS_RETORNO)}</errorDescription>
</bol:setWriteBSCSBundleResponse>]]></con5:xqueryText>
                                            </con1:expr>
                                        </con1:replace>
                                        <con1:reply>
                                            <con1:id>_ActionId-779364692801007969-40b34d4.13d44f1c153.-7d4e</con1:id>
                                        </con1:reply>
                                    </con2:responseTransform>
                                </con2:wsCallout>
                            </con2:actions>
                        </con2:case>
                        <con2:default/>
                    </con2:ifThenElse>
                </con:actions>
            </con:stage>
            <con:stage name="stage_rules_validation_customer" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                <con:context>
                    <con5:userNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/PROVI_BOLS/NII_BSCS_BUNDLES_PKG/GET_ACCOUNT_DUMMY" prefix="get1" xmlns:con5="http://www.bea.com/wli/sb/stages/config"/>
                    <con5:varNsDecl namespace="http://bolsas.bscs.bundle.ws.ncl.nii.com" prefix="bol" xmlns:con5="http://www.bea.com/wli/sb/stages/config"/>
                    <con5:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/PROVI_BOLS/NII_BSCS_BUNDLES_PKG/IS_CUSTOMER_LEVEL_10_FN/" prefix="nii" xmlns:con5="http://www.bea.com/wli/sb/stages/config"/>
                    <con5:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/PROVI_BOLS/NII_BSCS_BUNDLES_PKG/GET_ACCOUNT_DUMMY/" prefix="get" xmlns:con5="http://www.bea.com/wli/sb/stages/config"/>
                    <con5:varNsDecl namespace="http://xml.apache.org/axis/wsdd/providers/java" prefix="java" xmlns:con5="http://www.bea.com/wli/sb/stages/config"/>
                    <con5:varNsDecl namespace="http://www.lhsgroup.com/ws_v2_NII_1" prefix="ws1" xmlns:con5="http://www.bea.com/wli/sb/stages/config"/>
                    <con5:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/PROVI_BOLS/NII_BSCS_BUNDLES_PKG/GET_COFU_X_CODID/" prefix="get2" xmlns:con5="http://www.bea.com/wli/sb/stages/config"/>
                    <con3:variable name="BSJContractCreate" path="$BSJContractCreate">
                        <con3:service operation="execute">
                            <con3:reference ref="3GBSCS/Business Services/BSJcontractCreateService" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        </con3:service>
                    </con3:variable>
                    <con3:variable name="BSContractAllResponse" path="$BSContractAllResponse">
                        <con3:service operation="DBAGetContractAll">
                            <con3:reference ref="BSCSBundles/Business Services/BSGetContractAllService" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        </con3:service>
                    </con3:variable>
                    <con3:variable name="bol" path="$bol">
                        <con3:service>
                            <con3:reference ref="BSCSBundles/Business Services/BSDBAGetCofuxCodIdService" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        </con3:service>
                    </con3:variable>
                </con:context>
                <con:actions>
                    <con1:wsCallout>
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-4957580901040119709--391d7a37.13b99e4814d.-7cdd</con5:id>
                        <con1:service xsi:type="ref:BusinessServiceRef" ref="BSCSBundles/Business Services/BSGetContractAllService" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>DBAGetContractAll</con1:operation>
                        <con1:request>
                            <con1:body wrapped="false">bodyContractAllRequest</con1:body>
                        </con1:request>
                        <con1:response>
                            <con1:body wrapped="false">bodyContractAllResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                            <con1:assign varName="bodyContractAllRequest">
                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-4957580901040119709--391d7a37.13b99e4814d.-7ce2</con5:id>
                                <con1:expr>
                                    <con5:xqueryTransform xmlns:con5="http://www.bea.com/wli/sb/stages/config">
                                        <con5:resource ref="BSCSBundles/Resources/XQuery/IN_XQ_PWriteBscsBundleService_TO_BSGetContractAll"/>
                                        <con5:param name="setWriteBSCSBundle1">
                                            <con5:path>$body/bol:setWriteBSCSBundle</con5:path>
                                        </con5:param>
                                    </con5:xqueryTransform>
                                </con1:expr>
                            </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform>
                            <con1:ifThenElse>
                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-4957580901040119709--391d7a37.13b99e4814d.-7ce1</con5:id>
                                <con1:case>
                                    <con1:condition>
                                        <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">data($bodyContractAllResponse/get:SN_COD_RETORNO)='0'</con5:xqueryText>
                                    </con1:condition>
                                    <con1:actions>
                                        <con1:assign varName="contractId">
                                            <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-4957580901040119709--391d7a37.13b99e4814d.-7ce0</con5:id>
                                            <con1:expr>
                                                <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">data($bodyContractAllResponse/get:OBJ_CONTRACT_ALL/get:CO_ID)</con5:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                        <con1:assign varName="contractIdPub">
                                            <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-4957580901040119709--391d7a37.13b99e4814d.-7cdf</con5:id>
                                            <con1:expr>
                                                <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">$bodyContractAllResponse/ws1:contractNew/ws1:coIdPub</con5:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                        <con1:foreach>
                                            <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-4957580901040119709--391d7a37.13b99e4814d.-77be</con5:id>
                                            <con1:variable>itemPackage</con1:variable>
                                            <con1:expression>
                                                <con5:xpathText xmlns:con5="http://www.bea.com/wli/sb/stages/config">./bol:setWriteBSCSBundle/packages/item_pkg/services</con5:xpathText>
                                            </con1:expression>
                                            <con1:value-variable>serviceWrite</con1:value-variable>
                                            <con1:index-variable>i</con1:index-variable>
                                            <con1:total-variable>countPackage</con1:total-variable>
                                            <con1:actions>
                                                <con5:wsCallout xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con1="http://www.bea.com/wli/sb/stages/config" xmlns:con5="http://www.bea.com/wli/sb/stages/transform/config">
                                                    <con1:id>_ActionId-8509752951697094589-6585788d.13b9b29c242.-7f71</con1:id>
                                                    <con5:service xsi:type="ref:BusinessServiceRef" ref="BSCSBundles/Business Services/BSDBAGetCofuxCodIdService" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                    <con5:operation>DBAGetCofuxCodId</con5:operation>
                                                    <con5:request>
                                                        <con5:body>validCofuxCodIdRequest</con5:body>
                                                    </con5:request>
                                                    <con5:response>
                                                        <con5:body>validCofuxCodIdReponse</con5:body>
                                                    </con5:response>
                                                    <con5:requestTransform>
                                                        <con5:assign varName="contractTmcCode">
                                                            <con1:id>_ActionId-8509752951697094589-6585788d.13b9b29c242.-7f7b</con1:id>
                                                            <con5:expr>
                                                                <con1:xqueryText>data($bodyContractAllResponse/get:OBJ_CONTRACT_ALL/get:TMCODE)</con1:xqueryText>
                                                            </con5:expr>
                                                        </con5:assign>
                                                        <con5:assign varName="serviceWrite">
                                                            <con1:id>_ActionId-8509752951697094589-6585788d.13b9b29c242.-7f7a</con1:id>
                                                            <con5:expr>
                                                                <con1:xqueryText>$body/bol:setWriteBSCSBundle/packages/item_pkg/services</con1:xqueryText>
                                                            </con5:expr>
                                                        </con5:assign>
                                                        <con5:assign varName="validCofuxCodIdRequest">
                                                            <con1:id>_ActionId-8509752951697094589-6585788d.13b9b29c242.-7f79</con1:id>
                                                            <con5:expr>
                                                                <con1:xqueryTransform>
                                                                    <con1:resource ref="BSCSBundles/Resources/XQuery/IN_XQ_GetCofuxCodId"/>
                                                                    <con1:param name="services1">
                                                                        <con1:path>$contractTmcCode</con1:path>
                                                                    </con1:param>
                                                                    <con1:param name="tmcCode">
                                                                        <con1:path>$body/bol:setWriteBSCSBundle/packages/item_pkg/services</con1:path>
                                                                    </con1:param>
                                                                </con1:xqueryTransform>
                                                            </con5:expr>
                                                        </con5:assign>
                                                    </con5:requestTransform>
                                                    <con5:responseTransform>
                                                        <con5:assign varName="validaCodErroCofu">
                                                            <con1:id>_ActionId-8509752951697094589-6585788d.13b9b29c242.-7f78</con1:id>
                                                            <con5:expr>
                                                                <con1:xqueryText>$validCofuxCodIdReponse/get2:OutputParameters/get2:SN_COD_RETORNO</con1:xqueryText>
                                                            </con5:expr>
                                                        </con5:assign>
                                                        <con5:ifThenElse>
                                                            <con1:id>_ActionId-8509752951697094589-6585788d.13b9b29c242.-7f77</con1:id>
                                                            <con5:case>
                                                                <con5:condition>
                                                                    <con1:xqueryConditionExpr>
                                                                        <con1:compExpr operator="=">
                                                                            <con1:leftPath>$validaCodErroCofu</con1:leftPath>
                                                                            <con1:rightPath>0</con1:rightPath>
                                                                        </con1:compExpr>
                                                                    </con1:xqueryConditionExpr>
                                                                </con5:condition>
                                                                <con5:actions/>
                                                            </con5:case>
                                                            <con5:default>
                                                                <con1:wsCallout xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                                                                    <con6:id xmlns:con6="http://www.bea.com/wli/sb/stages/config">_ActionId-8509752951697094589-6585788d.13b9b29c242.-7f72</con6:id>
                                                                    <con1:service xsi:type="ref:BusinessServiceRef" ref="BSCSBundles/Business Services/BSIsCustomerLevel10Service" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                    <con1:operation>IsCustomerLevel10Service</con1:operation>
                                                                    <con1:request>
                                                                        <con1:body>BSisValidCusRequest</con1:body>
                                                                    </con1:request>
                                                                    <con1:response>
                                                                        <con1:body>BSisValidCusResponse</con1:body>
                                                                    </con1:response>
                                                                    <con1:requestTransform>
                                                                        <con1:assign varName="BSisValidCusRequest">
                                                                            <con6:id xmlns:con6="http://www.bea.com/wli/sb/stages/config">_ActionId-8509752951697094589-6585788d.13b9b29c242.-7f76</con6:id>
                                                                            <con1:expr>
                                                                                <con5:xqueryTransform xmlns:con5="http://www.bea.com/wli/sb/stages/config">
                                                                                    <con5:resource ref="BSCSBundles/Resources/XQuery/IN_XQ_PWriteBscsBundleService_TO_BSIsValidCustomer"/>
                                                                                    <con5:param name="setWriteBSCSBundle1">
                                                                                        <con5:path>$body/bol:setWriteBSCSBundle</con5:path>
                                                                                    </con5:param>
                                                                                </con5:xqueryTransform>
                                                                            </con1:expr>
                                                                        </con1:assign>
                                                                    </con1:requestTransform>
                                                                    <con1:responseTransform>
                                                                        <con1:assign varName="isValidCustomer">
                                                                            <con6:id xmlns:con6="http://www.bea.com/wli/sb/stages/config">_ActionId-8509752951697094589-6585788d.13b9b29c242.-7f75</con6:id>
                                                                            <con1:expr>
                                                                                <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">data($BSisValidCusResponse)</con5:xqueryText>
                                                                            </con1:expr>
                                                                        </con1:assign>
                                                                        <con1:ifThenElse>
                                                                            <con6:id xmlns:con6="http://www.bea.com/wli/sb/stages/config">_ActionId-8509752951697094589-6585788d.13b9b29c242.-7f74</con6:id>
                                                                            <con1:case>
                                                                                <con1:condition>
                                                                                    <con5:xqueryConditionExpr xmlns:con5="http://www.bea.com/wli/sb/stages/config">
                                                                                        <con5:compExpr operator="!=">
                                                                                            <con5:leftPath>$isValidCustomer</con5:leftPath>
                                                                                            <con5:rightPath>'FALSE'</con5:rightPath>
                                                                                        </con5:compExpr>
                                                                                    </con5:xqueryConditionExpr>
                                                                                </con1:condition>
                                                                                <con1:actions/>
                                                                            </con1:case>
                                                                            <con1:default>
                                                                                <con1:Error>
                                                                                    <con6:id xmlns:con6="http://www.bea.com/wli/sb/stages/config">_ActionId-8509752951697094589-6585788d.13b9b29c242.-7f73</con6:id>
                                                                                    <con1:errCode>1</con1:errCode>
                                                                                    <con1:message>No cumple con la condicion de un Cliente Nivel 10</con1:message>
                                                                                </con1:Error>
                                                                            </con1:default>
                                                                        </con1:ifThenElse>
                                                                    </con1:responseTransform>
                                                                </con1:wsCallout>
                                                            </con5:default>
                                                        </con5:ifThenElse>
                                                    </con5:responseTransform>
                                                </con5:wsCallout>
                                            </con1:actions>
                                        </con1:foreach>
                                    </con1:actions>
                                </con1:case>
                                <con1:default>
                                    <con1:wsCallout>
                                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-4957580901040119709--391d7a37.13b99e4814d.-7cc9</con5:id>
                                        <con1:service xsi:type="ref:BusinessServiceRef" ref="BSCSBundles/Business Services/BSIsCustomerLevel10Service" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                        <con1:operation>IsCustomerLevel10Service</con1:operation>
                                        <con1:request>
                                            <con1:body>BSisValidCusRequest</con1:body>
                                        </con1:request>
                                        <con1:response>
                                            <con1:body>BSisValidCusResponse</con1:body>
                                        </con1:response>
                                        <con1:requestTransform>
                                            <con1:assign varName="BSisValidCusRequest">
                                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-4957580901040119709--391d7a37.13b99e4814d.-7ccd</con5:id>
                                                <con1:expr>
                                                    <con5:xqueryTransform xmlns:con5="http://www.bea.com/wli/sb/stages/config">
                                                        <con5:resource ref="BSCSBundles/Resources/XQuery/IN_XQ_PWriteBscsBundleService_TO_BSIsValidCustomer"/>
                                                        <con5:param name="setWriteBSCSBundle1">
                                                            <con5:path>$body/bol:setWriteBSCSBundle</con5:path>
                                                        </con5:param>
                                                    </con5:xqueryTransform>
                                                </con1:expr>
                                            </con1:assign>
                                        </con1:requestTransform>
                                        <con1:responseTransform>
                                            <con1:assign varName="isValidCustomer">
                                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-4957580901040119709--391d7a37.13b99e4814d.-7ccc</con5:id>
                                                <con1:expr>
                                                    <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">data($BSisValidCusResponse)</con5:xqueryText>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:ifThenElse>
                                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-4957580901040119709--391d7a37.13b99e4814d.-7ccb</con5:id>
                                                <con1:case>
                                                    <con1:condition>
                                                        <con5:xqueryConditionExpr xmlns:con5="http://www.bea.com/wli/sb/stages/config">
                                                            <con5:compExpr operator="!=">
                                                                <con5:leftPath>$isValidCustomer</con5:leftPath>
                                                                <con5:rightPath>'FALSE'</con5:rightPath>
                                                            </con5:compExpr>
                                                        </con5:xqueryConditionExpr>
                                                    </con1:condition>
                                                    <con1:actions/>
                                                </con1:case>
                                                <con1:default>
                                                    <con1:Error>
                                                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-4957580901040119709--391d7a37.13b99e4814d.-7cca</con5:id>
                                                        <con1:errCode>1</con1:errCode>
                                                        <con1:message>No cumple con la condicion de un Cliente Nivel 10</con1:message>
                                                    </con1:Error>
                                                </con1:default>
                                            </con1:ifThenElse>
                                        </con1:responseTransform>
                                    </con1:wsCallout>
                                    <con1:assign varName="operationFlag">
                                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-4957580901040119709--391d7a37.13b99e4814d.-7cde</con5:id>
                                        <con1:expr>
                                            <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">3</con5:xqueryText>
                                        </con1:expr>
                                    </con1:assign>
                                </con1:default>
                            </con1:ifThenElse>
                        </con1:responseTransform>
                    </con1:wsCallout>
                </con:actions>
            </con:stage>
            <con:stage name="stage_variables_globales" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                <con:context>
                    <con5:userNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/PROVI_BOLS/NII_BSCS_BUNDLES_PKG/VALIDA_SERVICIO_CUSTOMER_FN/" prefix="va" xmlns:con5="http://www.bea.com/wli/sb/stages/config"/>
                    <con5:varNsDecl namespace="http://bolsas.bscs.bundle.ws.ncl.nii.com" prefix="bol" xmlns:con5="http://www.bea.com/wli/sb/stages/config"/>
                    <con5:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/PROVI_BOLS/NII_BSCS_BUNDLES_PKG/GET_CONFIG_BOLSAS_BY_FILTER_FN/" prefix="get" xmlns:con5="http://www.bea.com/wli/sb/stages/config"/>
                    <con3:variable name="BSGetConfigBolsa" path="$BSGetConfigBolsa">
                        <con3:service operation="DBAGetConfigBolsasService">
                            <con3:reference ref="BSCSBundles/Business Services/BSDBAGetConfigBolsasService" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        </con3:service>
                    </con3:variable>
                </con:context>
                <con:actions>
                    <con1:wsCallout>
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-5f83</con5:id>
                        <con1:service xsi:type="ref:BusinessServiceRef" ref="BSCSBundles/Business Services/BSDBAGetConfigBolsasService" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>DBAGetConfigBolsasService</con1:operation>
                        <con1:request>
                            <con1:body>bodyGetConfigBolsasRequest</con1:body>
                        </con1:request>
                        <con1:response>
                            <con1:body>bodyGetConfigBolsasResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                            <con1:assign varName="bodyGetConfigBolsasRequest">
                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-5f86</con5:id>
                                <con1:expr>
                                    <con5:xqueryTransform xmlns:con5="http://www.bea.com/wli/sb/stages/config">
                                        <con5:resource ref="BSCSBundles/Resources/XQuery/IN_XQ_PWriteBscsBundleService_TO_BSGetConfigBolsaService"/>
                                        <con5:param name="setWriteBSCSBundle1">
                                            <con5:path>$body/bol:setWriteBSCSBundle</con5:path>
                                        </con5:param>
                                    </con5:xqueryTransform>
                                </con1:expr>
                            </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform>
                            <con1:ifThenElse>
                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-5f85</con5:id>
                                <con1:case>
                                    <con1:condition>
                                        <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">not(exists($bodyGetConfigBolsasResponse/get:GET_CONFIG_BOLSAS_BY_FILTER_FN/get:ID))</con5:xqueryText>
                                    </con1:condition>
                                    <con1:actions>
                                        <con1:Error>
                                            <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-5f84</con5:id>
                                            <con1:errCode>1</con1:errCode>
                                            <con1:message>No se encontro plan Dummy en la tabla de configuracion</con1:message>
                                        </con1:Error>
                                    </con1:actions>
                                </con1:case>
                                <con1:default/>
                            </con1:ifThenElse>
                        </con1:responseTransform>
                    </con1:wsCallout>
                    <con1:assign varName="in_sccode">
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-5f82</con5:id>
                        <con1:expr>
                            <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">data($bodyGetConfigBolsasResponse/get:GET_CONFIG_BOLSAS_BY_FILTER_FN/get:SCCODE)</con5:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="in_rpcode">
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-5f81</con5:id>
                        <con1:expr>
                            <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">data($bodyGetConfigBolsasResponse/get:GET_CONFIG_BOLSAS_BY_FILTER_FN/get:PLAN_DUMMY)</con5:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="in_plcode">
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-5f80</con5:id>
                        <con1:expr>
                            <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">data($bodyGetConfigBolsasResponse/get:GET_CONFIG_BOLSAS_BY_FILTER_FN/get:MARKET)</con5:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="in_submId">
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-5f7f</con5:id>
                        <con1:expr>
                            <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">"2"</con5:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="in_profileId">
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-5f7e</con5:id>
                        <con1:expr>
                            <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">"0"</con5:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="in_cosPendingStatus">
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-5f7d</con5:id>
                        <con1:expr>
                            <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">"2"</con5:xqueryText>
                        </con1:expr>
                    </con1:assign>
                </con:actions>
            </con:stage>
            <con:stage name="ValidaExistenciaDeServicio">
                <con:context>
                    <con1:userNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/PROVI_BOLS/NII_BSCS_BUNDLES_PKG/VALIDA_SERVICIO_CUSTOMER_FN/" prefix="va"/>
                    <con1:varNsDecl namespace="http://bolsas.bscs.bundle.ws.ncl.nii.com" prefix="bol"/>
                </con:context>
                <con:actions>
                    <con2:ifThenElse xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config">
                        <con1:id>_ActionId-3535016641763401399-2e7fe2ec.13d5ef3f15c.-744b</con1:id>
                        <con2:case>
                            <con2:condition>
                                <con1:xqueryConditionExpr>
                                    <con1:compExpr operator="=">
                                        <con1:leftPath>$operationFlag</con1:leftPath>
                                        <con1:rightPath>'0'</con1:rightPath>
                                    </con1:compExpr>
                                </con1:xqueryConditionExpr>
                            </con2:condition>
                            <con2:actions>
                                <con2:assign varName="countP">
                                    <con1:id>_ActionId-6776089754972284264--1736bf50.13dc6d0e88e.-7c1b</con1:id>
                                    <con2:expr>
                                        <con1:xqueryText>fn:count($body/bol:setWriteBSCSBundle/packages/item_pkg)</con1:xqueryText>
                                    </con2:expr>
                                </con2:assign>
                                <con5:assign varName="serviceWriteDel" xmlns:con5="http://www.bea.com/wli/sb/stages/transform/config">
                                    <con1:id>_ActionId-3535016641763401399-2e7fe2ec.13d5ef3f15c.-7315</con1:id>
                                    <con5:expr>
                                        <con1:xqueryText>$body</con1:xqueryText>
                                    </con5:expr>
                                </con5:assign>
                                <con2:assign varName="countS">
                                    <con1:id>_ActionId-7573765882499141148--2946ffe9.13dcc1b4875.-7cf4</con1:id>
                                    <con2:expr>
                                        <con1:xqueryText>fn:count($body/bol:setWriteBSCSBundle/packages/item_pkg/services/item_srv)</con1:xqueryText>
                                    </con2:expr>
                                </con2:assign>
                                <con2:foreach>
                                    <con1:id>_ActionId-6776089754972284264--1736bf50.13dc6d0e88e.-7cdd</con1:id>
                                    <con2:variable>serviceWriteDel</con2:variable>
                                    <con2:expression>
                                        <con1:xpathText>./bol:setWriteBSCSBundle/packages/item_pkg</con1:xpathText>
                                    </con2:expression>
                                    <con2:value-variable>packageColl</con2:value-variable>
                                    <con2:index-variable>currIndexP</con2:index-variable>
                                    <con2:total-variable>countP</con2:total-variable>
                                    <con2:actions>
                                        <con1:assign varName="LC_spcode" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-6776089754972284264--1736bf50.13dc6d0e88e.-7b3b</con5:id>
                                            <con1:expr>
                                                <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">data($packageColl/spcode)</con5:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                        <con1:assign varName="LC_templ_Id" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-7573765882499141148--2946ffe9.13dcc1b4875.-7cf6</con5:id>
                                            <con1:expr>
                                                <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">data($packageColl/services/item_srv/templ_Id)</con5:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                        <con1:assign varName="SNCodeVal" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-7573765882499141148--2946ffe9.13dcc1b4875.-7e26</con5:id>
                                            <con1:expr>
                                                <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">data($packageColl/services/item_srv/sncode)</con5:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                        <con5:wsCallout xmlns:con5="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con1:id>_ActionId-7573765882499141148--2946ffe9.13dcc1b4875.-7d30</con1:id>
                                            <con5:service xsi:type="ref:BusinessServiceRef" ref="BSCSBundles/Business Services/BSValidaServiCustomerDBA" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                            <con5:operation>ValidaServiCustomerDBA</con5:operation>
                                            <con5:request>
                                                <con5:body>ValServiCusRequest</con5:body>
                                            </con5:request>
                                            <con5:response>
                                                <con5:body>ValServiCusResponse</con5:body>
                                            </con5:response>
                                            <con5:requestTransform>
                                                <con5:assign varName="ValServiCusRequest">
                                                    <con1:id>_ActionId-7573765882499141148--2946ffe9.13dcc1b4875.-7d3d</con1:id>
                                                    <con5:expr>
                                                        <con1:xqueryText><![CDATA[<val:InputParameters xmlns:val="http://xmlns.oracle.com/pcbpel/adapter/db/PROVI_BOLS/NII_BSCS_BUNDLES_PKG/VALIDA_SERVICIO_CUSTOMER_FN/">
    <!--Optional:-->
    <val:IN_CUSTOMER_ID>{xs:integer(data($body/bol:setWriteBSCSBundle/enterpriseID))}</val:IN_CUSTOMER_ID>
    <!--Optional:-->
    <val:IN_SNCODE>{xs:integer($SNCodeVal)}</val:IN_SNCODE>
</val:InputParameters>]]></con1:xqueryText>
                                                    </con5:expr>
                                                </con5:assign>
                                            </con5:requestTransform>
                                            <con5:responseTransform>
                                                <con5:assign varName="ResultValSerCus">
                                                    <con1:id>_ActionId-7573765882499141148--2946ffe9.13dcc1b4875.-7d3c</con1:id>
                                                    <con5:expr>
                                                        <con1:xqueryText>data($ValServiCusResponse/va:VALIDA_SERVICIO_CUSTOMER_FN)</con1:xqueryText>
                                                    </con5:expr>
                                                </con5:assign>
                                                <con5:ifThenElse>
                                                    <con1:id>_ActionId-7573765882499141148--2946ffe9.13dcc1b4875.-7d3b</con1:id>
                                                    <con5:case>
                                                        <con5:condition>
                                                            <con1:xqueryConditionExpr>
                                                                <con1:compExpr operator="!=">
                                                                    <con1:leftPath>xs:string($ResultValSerCus)</con1:leftPath>
                                                                    <con1:rightPath>'0'</con1:rightPath>
                                                                </con1:compExpr>
                                                            </con1:xqueryConditionExpr>
                                                        </con5:condition>
                                                        <con5:actions>
                                                            <con5:assign varName="version">
                                                                <con1:id>_ActionId-7573765882499141148--2946ffe9.13dcc1b4875.-7d3a</con1:id>
                                                                <con5:expr>
                                                                    <con1:xqueryText>4</con1:xqueryText>
                                                                </con5:expr>
                                                            </con5:assign>
                                                            <con1:wsCallout xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                                                                <con6:id xmlns:con6="http://www.bea.com/wli/sb/stages/config">_ActionId-7573765882499141148--2946ffe9.13dcc1b4875.-7d34</con6:id>
                                                                <con1:service xsi:type="ref:BusinessServiceRef" ref="3GBSCS/Business Services/BSContractServicesWrite" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                <con1:operation>execute</con1:operation>
                                                                <con1:request>
                                                                    <con1:body>ContractSerWriteResquest</con1:body>
                                                                    <con1:header>ContractSerWriteHeaderReq</con1:header>
                                                                </con1:request>
                                                                <con1:response>
                                                                    <con1:body>ContractSerWriteResponse</con1:body>
                                                                    <con1:header>ContractSerWriteHeaderRes</con1:header>
                                                                </con1:response>
                                                                <con1:requestTransform>
                                                                    <con1:assign varName="in_cosPendingStatus">
                                                                        <con6:id xmlns:con6="http://www.bea.com/wli/sb/stages/config">_ActionId-7573765882499141148--2946ffe9.13dcc1b4875.-7d39</con6:id>
                                                                        <con1:expr>
                                                                            <con6:xqueryText xmlns:con6="http://www.bea.com/wli/sb/stages/config">"2"</con6:xqueryText>
                                                                        </con1:expr>
                                                                    </con1:assign>
                                                                    <con1:assign varName="ContractSerWriteHeaderReq">
                                                                        <con6:id xmlns:con6="http://www.bea.com/wli/sb/stages/config">_ActionId-7573765882499141148--2946ffe9.13dcc1b4875.-7d38</con6:id>
                                                                        <con1:expr>
                                                                            <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">$header</con5:xqueryText>
                                                                        </con1:expr>
                                                                    </con1:assign>
                                                                    <con1:assign varName="ContractSerWriteResquest">
                                                                        <con6:id xmlns:con6="http://www.bea.com/wli/sb/stages/config">_ActionId-7573765882499141148--2946ffe9.13dcc1b4875.-7d37</con6:id>
                                                                        <con1:expr>
                                                                            <con6:xqueryText xmlns:con6="http://www.bea.com/wli/sb/stages/config"><![CDATA[<ws:ContractServicesWrite xmlns:ws="http://www.lhsgroup.com/ws_v2_NII_1" xmlns:java="http://xml.apache.org/axis/wsdd/providers/java">
 <java:input>
	<ws:coId>{xs:integer($contractId)}</ws:coId>
	<ws:services>
	   <ws:item>
		  <ws:cosPendingStatus>{xs:integer($in_cosPendingStatus)}</ws:cosPendingStatus>
		  <ws:profileId>{xs:integer($in_profileId)}</ws:profileId>
		  <ws:sncode>{xs:integer($SNCodeVal)}</ws:sncode>
	   </ws:item>
	</ws:services>
 </java:input>
 <java:sessionChange>
	<ws:values>
	   <!--Zero or more repetitions:-->
	   <ws:item>
		  <ws:key>BU_ID</ws:key>
		  <ws:value>2</ws:value>
	   </ws:item>
	</ws:values>
 </java:sessionChange>
</ws:ContractServicesWrite>]]></con6:xqueryText>
                                                                        </con1:expr>
                                                                    </con1:assign>
                                                                    <con1:assign varName="r3">
                                                                        <con6:id xmlns:con6="http://www.bea.com/wli/sb/stages/config">_ActionId-7573765882499141148--2946ffe9.13dcc1b4875.-7d36</con6:id>
                                                                        <con1:expr>
                                                                            <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">$in_profileId</con5:xqueryText>
                                                                        </con1:expr>
                                                                    </con1:assign>
                                                                    <con1:assign varName="rep1">
                                                                        <con6:id xmlns:con6="http://www.bea.com/wli/sb/stages/config">_ActionId-7573765882499141148--2946ffe9.13dcc1b4875.-7d35</con6:id>
                                                                        <con1:expr>
                                                                            <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">$in_contractId</con5:xqueryText>
                                                                        </con1:expr>
                                                                    </con1:assign>
                                                                </con1:requestTransform>
                                                                <con1:responseTransform/>
                                                            </con1:wsCallout>
                                                        </con5:actions>
                                                    </con5:case>
                                                    <con5:default>
                                                        <con5:wsCallout>
                                                            <con1:id>_ActionId-7573765882499141148--2946ffe9.13dcc1b4875.-7d31</con1:id>
                                                            <con5:service xsi:type="ref:BusinessServiceRef" ref="3GBSCS/Business Services/BSJcontractServicesAddService" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                            <con5:operation>execute</con5:operation>
                                                            <con5:request>
                                                                <con5:body>ContAddServiceRequest</con5:body>
                                                                <con5:header>ContAddServiceHeadRequest</con5:header>
                                                            </con5:request>
                                                            <con5:response>
                                                                <con5:body>ContAddServiceReponse</con5:body>
                                                                <con5:header>ContAddServiceHeadReponse</con5:header>
                                                            </con5:response>
                                                            <con5:requestTransform>
                                                                <con1:assign varName="ContAddServiceHeadRequest" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                                                                    <con6:id xmlns:con6="http://www.bea.com/wli/sb/stages/config">_ActionId-7573765882499141148--2946ffe9.13dcc1b4875.-7d33</con6:id>
                                                                    <con1:expr>
                                                                        <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">$header</con5:xqueryText>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                                <con5:assign varName="ContAddServiceRequest">
                                                                    <con1:id>_ActionId-7573765882499141148--2946ffe9.13dcc1b4875.-7d32</con1:id>
                                                                    <con5:expr>
                                                                        <con1:xqueryText><![CDATA[<ws:JcontractServicesAdd xmlns:ws="http://www.lhsgroup.com/ws_v2_NII_1"  xmlns:java="http://xml.apache.org/axis/wsdd/providers/java">
         <!--Optional:-->
         <java:input>
            <!--Optional:-->
            <ws:services>
               <!--Zero or more repetitions:-->
               <ws:item>
                  <!--Optional:-->
                  <ws:contractServicesAdd>
                     <ws:coId>{xs:integer($contractId)}</ws:coId>
                     <ws:services>
                        <!--Zero or more repetitions:-->
                        <ws:item>
                           <ws:cosTemplId>{xs:integer($LC_templ_Id)}</ws:cosTemplId>
                           <ws:profileId>{xs:integer($in_profileId)}</ws:profileId>
                           <ws:sncode>{xs:integer($SNCodeVal)}</ws:sncode>
                           <ws:spcode>{xs:integer($LC_spcode)}</ws:spcode>
                        </ws:item>
                     </ws:services>
                  </ws:contractServicesAdd>
                  <ws:contractServicesWrite>
                     <ws:coId>{xs:integer($contractId)}</ws:coId>
                     <ws:services>
                        <!--Zero or more repetitions:-->
                        <ws:item>
                           <ws:cosPendingStatus>{xs:integer($in_cosPendingStatus)}</ws:cosPendingStatus>
                           <ws:profileId>{xs:integer($in_profileId)}</ws:profileId>
                           <ws:sncode>{xs:integer($SNCodeVal)}</ws:sncode>
                        </ws:item>
                     </ws:services>
                  </ws:contractServicesWrite>
               </ws:item>
            </ws:services>
         </java:input>
         <!--Optional:-->
         <java:sessionChange>
            <!--Optional:-->
            <ws:values>
               <!--Zero or more repetitions:-->
               <ws:item>
                  <!--Optional:-->
                  <ws:key>BU_ID</ws:key>
                  <!--Optional:-->
                  <ws:value>2</ws:value>
               </ws:item>
            </ws:values>
         </java:sessionChange>
      </ws:JcontractServicesAdd>]]></con1:xqueryText>
                                                                    </con5:expr>
                                                                </con5:assign>
                                                            </con5:requestTransform>
                                                            <con5:responseTransform/>
                                                        </con5:wsCallout>
                                                    </con5:default>
                                                </con5:ifThenElse>
                                            </con5:responseTransform>
                                        </con5:wsCallout>
                                    </con2:actions>
                                </con2:foreach>
                            </con2:actions>
                        </con2:case>
                        <con2:default/>
                    </con2:ifThenElse>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="response" name="PipelinePairNode_Removed_response" errorHandler="_onErrorHandler-5023787538777216641-4a17bb41.13cdedf2199.-77a9">
            <con:stage name="stage_end_Removed" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                <con:context/>
                <con:actions>
                    <con1:assign varName="header">
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-6433</con5:id>
                        <con1:expr>
                            <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">$headerBSJContractCreateServiceResponse</con5:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:replace varName="bodyRemovedResponse" contents-only="true">
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-6432</con5:id>
                        <con1:location>
                            <con5:xpathText xmlns:con5="http://www.bea.com/wli/sb/stages/config">.</con5:xpathText>
                        </con1:location>
                        <con1:expr>
                            <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config"><![CDATA[<bol:setWriteBSCSBundleResponse xmlns:bol="http://bolsas.bscs.bundle.ws.ncl.nii.com">
   <errorCode>0</errorCode>
   <errorDescription>OK</errorDescription>
</bol:setWriteBSCSBundleResponse>]]></con5:xqueryText>
                        </con1:expr>
                    </con1:replace>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="request" name="PipelinePairNode_Add_request" errorHandler="_onErrorHandler-5893285784853191721--7b7c2843.13cdaba64d7.-8000">
            <con:stage name="stage_init_Add" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                <con:context>
                    <con5:varNsDecl namespace="http://bolsas.bscs.bundle.ws.ncl.nii.com" prefix="bol" xmlns:con5="http://www.bea.com/wli/sb/stages/config"/>
                    <con5:varNsDecl namespace="http://xml.apache.org/axis/wsdd/providers/java" prefix="java" xmlns:con5="http://www.bea.com/wli/sb/stages/config"/>
                    <con5:varNsDecl namespace="http://www.lhsgroup.com/ws_v2_NII_1" prefix="ws1" xmlns:con5="http://www.bea.com/wli/sb/stages/config"/>
                    <con3:variable name="BSJContractServiceAdd" path="$BSJContractServiceAdd">
                        <con3:service operation="execute">
                            <con3:reference ref="3GBSCS/Business Services/BSJcontractServicesAddService" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        </con3:service>
                    </con3:variable>
                </con:context>
                <con:actions>
                    <con5:skip xmlns:con5="http://www.bea.com/wli/sb/stages/config">
                        <con5:id>_ActionId-6776089754972284264--1736bf50.13dc6d0e88e.-7fcf</con5:id>
                    </con5:skip>
                    <con1:wsCallout>
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-643d</con5:id>
                        <con1:service xsi:type="ref:BusinessServiceRef" ref="3GBSCS/Business Services/BSJcontractServicesAddService" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>execute</con1:operation>
                        <con1:request>
                            <con1:body>bodyBSJContractServiceAddRequest</con1:body>
                            <con1:header>headerBSJContractServiceAddRequest</con1:header>
                        </con1:request>
                        <con1:response>
                            <con1:body>bodyBSJContractServiceAddResponse</con1:body>
                            <con1:header>headerBSJContractServiceAddResponse</con1:header>
                        </con1:response>
                        <con1:requestTransform>
                            <con1:assign varName="headerBSJContractServiceAddRequest">
                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-6443</con5:id>
                                <con1:expr>
                                    <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">$header</con5:xqueryText>
                                </con1:expr>
                            </con1:assign>
                            <con1:assign varName="pendinggggggstatussssss">
                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-6442</con5:id>
                                <con1:expr>
                                    <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">$in_cosPendingStatus</con5:xqueryText>
                                </con1:expr>
                            </con1:assign>
                            <con1:assign varName="in_contractServicesWriteAdd">
                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-6441</con5:id>
                                <con1:expr>
                                    <con5:xqueryTransform xmlns:con5="http://www.bea.com/wli/sb/stages/config">
                                        <con5:resource ref="BSCSBundles/Resources/XQuery/IN_XQ_PWriteBscsBundleService-Package_TO_BSJContractServiceAdd-write"/>
                                        <con5:param name="in_profileId">
                                            <con5:path>$in_profileId</con5:path>
                                        </con5:param>
                                        <con5:param name="in_coId">
                                            <con5:path>$contractId</con5:path>
                                        </con5:param>
                                        <con5:param name="in_cosPendingStatus">
                                            <con5:path>$in_cosPendingStatus</con5:path>
                                        </con5:param>
                                        <con5:param name="packages1">
                                            <con5:path>$body/bol:setWriteBSCSBundle/packages</con5:path>
                                        </con5:param>
                                    </con5:xqueryTransform>
                                </con1:expr>
                            </con1:assign>
                            <con1:assign varName="in_contractServicesAdd">
                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-6440</con5:id>
                                <con1:expr>
                                    <con5:xqueryTransform xmlns:con5="http://www.bea.com/wli/sb/stages/config">
                                        <con5:resource ref="BSCSBundles/Resources/XQuery/IN_XQ_PWriteBscsBundleService-Package_TO_BSJContractServiceAdd-Service"/>
                                        <con5:param name="in_param_coId">
                                            <con5:path>$contractId</con5:path>
                                        </con5:param>
                                        <con5:param name="packages1">
                                            <con5:path>$body/bol:setWriteBSCSBundle/packages</con5:path>
                                        </con5:param>
                                        <con5:param name="in_param_profileId">
                                            <con5:path>$in_profileId</con5:path>
                                        </con5:param>
                                    </con5:xqueryTransform>
                                </con1:expr>
                            </con1:assign>
                            <con1:assign varName="bodyBSJContractServiceAddRequest">
                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-643f</con5:id>
                                <con1:expr>
                                    <con5:xqueryTransform xmlns:con5="http://www.bea.com/wli/sb/stages/config">
                                        <con5:resource ref="BSCSBundles/Resources/XQuery/IN_XQ_PWriteBscsBundleService-Package_TO_BSJContractServiceAdd"/>
                                        <con5:param name="contractServicesAdd1">
                                            <con5:path>$in_contractServicesAdd</con5:path>
                                        </con5:param>
                                        <con5:param name="contractServicesWrite1">
                                            <con5:path>$in_contractServicesWriteAdd</con5:path>
                                        </con5:param>
                                    </con5:xqueryTransform>
                                </con1:expr>
                            </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform>
                            <con1:assign varName="coIdAddService">
                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-643e</con5:id>
                                <con1:expr>
                                    <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">$bodyBSJContractServiceAddResponse/ws1:contractRead/ws1:coId</con5:xqueryText>
                                </con1:expr>
                            </con1:assign>
                        </con1:responseTransform>
                    </con1:wsCallout>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="error" name="_onErrorHandler-5893285784853191721--7b7c2843.13cdaba64d7.-7f12">
            <con:stage name="stage_Error1">
                <con:context>
                    <con1:userNsDecl namespace="http://www.bea.com/wli/sb/stages/transform/config" prefix="asd"/>
                </con:context>
                <con:actions>
                    <con2:ifThenElse>
                        <con1:id>_ActionId-5023787538777216641-4a17bb41.13cdedf2199.-7e65</con1:id>
                        <con2:case>
                            <con2:condition>
                                <con1:xqueryConditionExpr>
                                    <con1:compExpr operator="=">
                                        <con1:leftPath>xs:string(data($fault/ctx:errorCode))</con1:leftPath>
                                        <con1:rightPath>'1'</con1:rightPath>
                                    </con1:compExpr>
                                </con1:xqueryConditionExpr>
                            </con2:condition>
                            <con2:actions>
                                <con1:assign varName="bodyError" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                                    <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-5023787538777216641-4a17bb41.13cdedf2199.-7c8e</con5:id>
                                    <con1:expr>
                                        <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config"><![CDATA[<bol:setWriteBSCSBundleResponse xmlns:bol="http://bolsas.bscs.bundle.ws.ncl.nii.com">
   <errorCode>{data($fault/ctx:errorCode)}</errorCode>
   <errorDescription>{data($fault/ctx:reason)}</errorDescription>
</bol:setWriteBSCSBundleResponse>]]></con5:xqueryText>
                                    </con1:expr>
                                </con1:assign>
                            </con2:actions>
                        </con2:case>
                        <con2:default>
                            <con1:assign varName="bodyError" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-5023787538777216641-4a17bb41.13cdedf2199.-7e2a</con5:id>
                                <con1:expr>
                                    <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config"><![CDATA[<bol:setWriteBSCSBundleResponse xmlns:bol="http://bolsas.bscs.bundle.ws.ncl.nii.com">
   <errorCode>{data($fault/ctx:errorCode)}</errorCode>
   <errorDescription>{fn:concat(data($fault/ctx:details/asd:ReceivedFaultDetail/asd:faultstring),data($fault/ctx:reason))}</errorDescription>
</bol:setWriteBSCSBundleResponse>]]></con5:xqueryText>
                                </con1:expr>
                            </con1:assign>
                        </con2:default>
                    </con2:ifThenElse>
                    <con1:assign varName="header" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-8687393328542752957-7ff5e535.13e8aecabf5.-7c4d</con5:id>
                        <con1:expr>
                            <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">&lt;soapenv:Header  	xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:bol="http://bolsas.bscs.bundle.ws.ncl.nii.com">
&lt;/soapenv:Header></con5:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:replace varName="body" contents-only="true" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-5893285784853191721--7b7c2843.13cdaba64d7.-7ed4</con5:id>
                        <con1:location>
                            <con5:xpathText xmlns:con5="http://www.bea.com/wli/sb/stages/config">.</con5:xpathText>
                        </con1:location>
                        <con1:expr>
                            <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">$bodyError</con5:xqueryText>
                        </con1:expr>
                    </con1:replace>
                    <con1:reply>
                        <con1:id>_ActionId-5893285784853191721--7b7c2843.13cdaba64d7.-7ed3</con1:id>
                    </con1:reply>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline name="_onErrorHandler-3519415211086069411--6be4aace.13b60a118b7.-65a4" type="error">
            <con:stage name="stage_error_search" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                <con:context/>
                <con:actions>
                    <con1:assign varName="errorBody">
                        <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-65a3</con4:id>
                        <con1:expr>
                            <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config"><![CDATA[<bol:getSearchBSCSBundlesResponse xmlns:bol="http://bolsas.bscs.bundle.ws.ncl.nii.com">
  <bol:errorCode>{data($fault/ctx:errorCode)}</bol:errorCode>
  <bol:errorDescription>{data($fault/ctx:reason)}</bol:errorDescription>
</bol:getSearchBSCSBundlesResponse>]]></con4:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:replace varName="body" contents-only="true">
                        <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3519415211086069411--6be4aace.13b60a118b7.-65a2</con4:id>
                        <con1:location>
                            <con4:xpathText xmlns:con4="http://www.bea.com/wli/sb/stages/config">.</con4:xpathText>
                        </con1:location>
                        <con1:expr>
                            <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">$errorBody</con4:xqueryText>
                        </con1:expr>
                    </con1:replace>
                    <con4:reply xmlns:con4="http://www.bea.com/wli/sb/stages/config">
                        <con4:id>_ActionId-4812617756576364731--47710f64.13cd909a0ff.-7fe4</con4:id>
                    </con4:reply>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:flow>
            <con:branch-node type="operation" name="BranchNode1">
                <con:context/>
                <con:branch-table>
                    <con:branch name="getSearchBSCSBundles">
                        <con:operator>equals</con:operator>
                        <con:value/>
                        <con:flow>
                            <con:pipeline-node name="PipelinePairNode11">
                                <con:request>PipelinePairNode1_request</con:request>
                                <con:response>PipelinePairNode1_response</con:response>
                            </con:pipeline-node>
                        </con:flow>
                    </con:branch>
                    <con:branch name="setWriteBSCSBundle">
                        <con:operator>equals</con:operator>
                        <con:value/>
                        <con:flow>
                            <con:pipeline-node name="PipelinePairNode_header11">
                                <con:request>PipelinePairNode_header_request</con:request>
                                <con:response>PipelinePairNode_header_response</con:response>
                            </con:pipeline-node>
                            <con:branch-node type="condition" name="Servicios1">
                                <con:comment>execute operation association</con:comment>
                                <con:context xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                                    <con5:varNsDecl namespace="http://write.bscs.bundle.ws.ncl.nii.com" prefix="writ" xmlns:con5="http://www.bea.com/wli/sb/stages/config"/>
                                </con:context>
                                <con:branch-table variable="operationFlag" xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                                    <con:branch name="AddService">
                                        <con:operator>equals</con:operator>
                                        <con:value>0</con:value>
                                        <con:flow>
                                            <con:pipeline-node name="PipelinePairNode_Add">
                                                <con:request>PipelinePairNode_Add_request</con:request>
                                                <con:response>PipelinePairNode_Add_response</con:response>
                                            </con:pipeline-node>
                                        </con:flow>
                                    </con:branch>
                                    <con:branch name="RemovedService">
                                        <con:operator>equals</con:operator>
                                        <con:value>2</con:value>
                                        <con:flow>
                                            <con:pipeline-node name="PipelinePairNode_Removed">
                                                <con:request>PipelinePairNode_Removed_request</con:request>
                                                <con:response>PipelinePairNode_Removed_response</con:response>
                                            </con:pipeline-node>
                                        </con:flow>
                                    </con:branch>
                                    <con:branch name="CreateContractAddService">
                                        <con:operator>equals</con:operator>
                                        <con:value>3</con:value>
                                        <con:flow>
                                            <con:pipeline-node name="PipelinePairNode_ContractAddService">
                                                <con:request>PipelinePairNode_ContractAddService_request</con:request>
                                                <con:response>PipelinePairNode_ContractAddService_response</con:response>
                                            </con:pipeline-node>
                                        </con:flow>
                                    </con:branch>
                                    <con:default-branch>
                                        <con:flow/>
                                    </con:default-branch>
                                </con:branch-table>
                            </con:branch-node>
                        </con:flow>
                    </con:branch>
                    <con:default-branch>
                        <con:flow/>
                    </con:default-branch>
                </con:branch-table>
            </con:branch-node>
        </con:flow>
    </con:router>
</con:pipelineEntry>